import{d as G,a as y,r as L,z as h,y as H,c as k,e as t,w as n,i as o,x as J,b as w,f as C,g as K,k as m,t as V,u as Q,o as u,_ as W}from"./index-Cmt4OYPI.js";const X={class:"index-classify-view"},Y={class:"form-row"},Z={key:2},ee={key:0,class:"table-wrapper"},te={class:"pagination-container"},le=G({__name:"IndexClassifyView",setup(ne){const z=Q(),v=y(!1),c=y(""),p=L({}),i=y(1),_=y(20),r=L({level:"L1",keyword:""}),S=h(()=>x.value.length),x=h(()=>{const l=p.records||[];if(!r.keyword)return l;const e=r.keyword.toLowerCase().trim();return l.filter(s=>s.index_code&&s.index_code.toLowerCase().includes(e)||s.industry_name&&s.industry_name.toLowerCase().includes(e)||s.industry_code&&s.industry_code.toLowerCase().includes(e))}),j=h(()=>{const l=x.value,e=(i.value-1)*_.value,s=e+_.value;return l.slice(e,s)});function B(l){switch(l){case"L1":return"danger";case"L2":return"warning";case"L3":return"success";default:return"info"}}function D(l){_.value=l,i.value=1}function N(l){i.value=l}function T(){r.level="L1",r.keyword="",i.value=1,f()}function U(l){z.push({name:"sw-industry-daily",query:{ts_code:l.index_code,industry_name:l.industry_name}})}async function f(){v.value=!0,c.value="";try{const l={};r.level&&(l.level=r.level);const e=await J.get("/django/api/index/sw-index-classify/",{params:l});Object.assign(p,e.data||{}),i.value=1}catch(l){c.value=l?.message||"请求失败",Object.assign(p,{})}finally{v.value=!1}}return H(()=>{f()}),(l,e)=>{const s=o("el-option"),I=o("el-select"),g=o("el-form-item"),R=o("el-input"),b=o("el-button"),q=o("el-form"),O=o("el-alert"),P=o("el-skeleton"),d=o("el-table-column"),E=o("el-tag"),M=o("el-table"),$=o("el-pagination"),A=o("el-empty"),F=o("el-card");return u(),k("div",X,[t(F,{shadow:"hover"},{header:n(()=>[...e[4]||(e[4]=[w("div",{class:"card-header"},[w("span",null,"申万行业分类查询")],-1)])]),default:n(()=>[w("div",Y,[t(q,{inline:!0,"label-width":"100px"},{default:n(()=>[t(g,{label:"行业级别"},{default:n(()=>[t(I,{modelValue:r.level,"onUpdate:modelValue":e[0]||(e[0]=a=>r.level=a),placeholder:"请选择级别",clearable:"",style:{width:"200px"},onChange:f},{default:n(()=>[t(s,{label:"一级行业",value:"L1"}),t(s,{label:"二级行业",value:"L2"}),t(s,{label:"三级行业",value:"L3"})]),_:1},8,["modelValue"])]),_:1}),t(g,{label:"关键字"},{default:n(()=>[t(R,{modelValue:r.keyword,"onUpdate:modelValue":e[1]||(e[1]=a=>r.keyword=a),placeholder:"输入代码或名称筛选",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),t(g,null,{default:n(()=>[t(b,{type:"primary",loading:v.value,onClick:f},{default:n(()=>[...e[5]||(e[5]=[m("查询",-1)])]),_:1},8,["loading"]),t(b,{onClick:T},{default:n(()=>[...e[6]||(e[6]=[m("重置默认",-1)])]),_:1})]),_:1})]),_:1})]),c.value?(u(),C(O,{key:0,type:"error",closable:!1,title:c.value,class:"mb-12"},null,8,["title"])):K("",!0),v.value&&!c.value?(u(),C(P,{key:1,rows:"6",animated:""})):(u(),k("div",Z,[p.records&&p.records.length?(u(),k("div",ee,[t(M,{data:j.value,border:"",height:"520",stripe:"",style:{width:"100%"}},{default:n(()=>[t(d,{prop:"index_code",label:"指数代码","min-width":"120"}),t(d,{prop:"industry_name",label:"行业名称","min-width":"120"}),t(d,{prop:"level",label:"级别","min-width":"100"},{default:n(a=>[t(E,{type:B(a.row.level)},{default:n(()=>[m(V(a.row.level),1)]),_:2},1032,["type"])]),_:1}),t(d,{prop:"industry_code",label:"行业代码","min-width":"120"}),t(d,{prop:"is_pub",label:"是否发布","min-width":"100"},{default:n(a=>[m(V(a.row.is_pub?"是":"否"),1)]),_:1}),t(d,{prop:"parent_code",label:"父级代码","min-width":"120"}),t(d,{prop:"src",label:"来源","min-width":"100"}),t(d,{label:"操作",width:"120",fixed:"right"},{default:n(a=>[t(b,{link:"",type:"primary",size:"small",onClick:ae=>U(a.row)},{default:n(()=>[...e[7]||(e[7]=[m(" 查看趋势 ",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),w("div",te,[t($,{"current-page":i.value,"onUpdate:currentPage":e[2]||(e[2]=a=>i.value=a),"page-size":_.value,"onUpdate:pageSize":e[3]||(e[3]=a=>_.value=a),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:S.value,onSizeChange:D,onCurrentChange:N},null,8,["current-page","page-size","total"])])])):(u(),C(A,{key:1,description:"暂无数据"}))]))]),_:1})])}}}),se=W(le,[["__scopeId","data-v-43498c8d"]]);export{se as default};
