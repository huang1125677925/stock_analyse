import{d as ae,a as m,z as E,y as le,B as M,D as se,G as ue,c as $,g as B,f as i,e,w as r,i as u,E as A,b as a,k as G,t as _,l,a0 as g,L as v,a1 as F,a2 as T,a3 as U,M as de,u as ie,o as d,_ as ce}from"./index-BUXKeKsP.js";import{g as _e}from"./strategyApi-Dusm2gpT.js";const pe={class:"index-rps-view","element-loading-text":"正在加载指数RPS数据..."},fe={key:0,class:"rps-data-section"},me={class:"table-header"},ge={class:"table-controls"},he={class:"custom-header"},we={class:"custom-header"},ve={class:"change-percent-cell"},be={class:"trend-indicator"},Re={class:"custom-header"},Se={class:"rps-cell"},xe={class:"custom-header"},ke={class:"change-percent-cell"},Pe={class:"trend-indicator"},ye={class:"custom-header"},Ne={class:"rps-cell"},Ce={class:"custom-header"},ze={class:"change-percent-cell"},Ve={class:"trend-indicator"},De={class:"custom-header"},Ie={class:"rps-cell"},Be={class:"table-footer"},Fe=ae({__name:"IndexRpsView",setup(Te){const b=m(!1),K=ie(),R=m([]),L=m(""),S=m(""),k=m("行业板块"),p=m(1),x=m(2e3),N=n=>{const o=typeof n=="number"?n:parseFloat(String(n));return Number.isFinite(o)?`${o>0?"+":""}${o.toFixed(2)}%`:"-"},C=E(()=>{let n=R.value;return S.value&&(n=n.filter(o=>o.name.includes(S.value))),n}),j=E(()=>{const n=(p.value-1)*x.value,o=n+x.value;return C.value.slice(n,o)}),H=()=>"RPS_5",z=n=>n>=90?"#f56c6c":n>=80?"#e6a23c":n>=70?"#67c23a":"#909399",V=n=>n>=90?"极强":n>=80?"强势":n>=70?"良好":n>=50?"一般":"弱势",D=n=>n>=90?"rank-excellent":n>=80?"rank-strong":n>=70?"rank-good":n>=50?"rank-normal":"rank-weak",J=({row:n})=>{const o=n.RPS_5;return o>=90?"row-excellent":o>=80?"row-strong":o>=70?"row-good":""},O=n=>{n.prop&&n.order&&R.value.sort((o,P)=>{const h=Number(o[n.prop]??0),y=Number(P[n.prop]??0);return n.order==="ascending"?h-y:y-h})},Q=n=>{x.value=n,p.value=1},W=n=>{p.value=n},X=n=>{K.push({path:"/stock-list",query:{dc_concept:n.name}})},q=async()=>{if(!b.value){b.value=!0;try{const o=await _e("5,20,60",!1,k.value);R.value=o.data,L.value=o.query_time,A.success("RPS数据加载成功")}catch(n){console.error("加载RPS数据失败:",n),A.error("加载RPS数据失败，请稍后重试")}finally{b.value=!1}}};return le(()=>{q()}),M(S,()=>{p.value=1}),M(k,()=>{p.value=1,q()}),(n,o)=>{const P=u("el-input"),h=u("el-option"),y=u("el-select"),c=u("el-table-column"),Y=u("el-tag"),s=u("el-icon"),f=u("el-tooltip"),Z=u("el-button"),I=u("el-progress"),ee=u("el-table"),te=u("el-pagination"),re=u("el-card"),ne=u("el-empty"),oe=ue("loading");return se((d(),$("div",pe,[R.value.length>0?(d(),$("div",fe,[e(re,{shadow:"hover"},{header:r(()=>[a("div",me,[a("div",ge,[e(P,{modelValue:S.value,"onUpdate:modelValue":o[0]||(o[0]=t=>S.value=t),placeholder:"搜索指数名称","prefix-icon":l(de),clearable:"",style:{width:"200px"}},null,8,["modelValue","prefix-icon"]),e(y,{modelValue:k.value,"onUpdate:modelValue":o[1]||(o[1]=t=>k.value=t),placeholder:"选择板块类型",style:{width:"160px","margin-left":"12px"}},{default:r(()=>[e(h,{label:"行业板块",value:"行业板块"}),e(h,{label:"概念板块",value:"概念板块"}),e(h,{label:"地域板块",value:"地域板块"})]),_:1},8,["modelValue"])])])]),default:r(()=>[e(ee,{data:j.value,stripe:"",border:"",style:{width:"100%"},"default-sort":{prop:H(),order:"descending"},height:"600","row-class-name":J,"highlight-current-row":"",onSortChange:O},{default:r(()=>[e(c,{type:"index",label:"#",width:"50",fixed:"left",align:"center"}),e(c,{prop:"ts_code",label:"ts_code",width:"150",sortable:"custom",fixed:"left",align:"center"},{default:r(t=>[e(Y,{size:"small",effect:"plain"},{default:r(()=>[G(_(t.row.ts_code),1)]),_:2},1024)]),_:1}),e(c,{prop:"name",label:"name",width:"150",sortable:"custom",fixed:"left"},{header:r(()=>[a("div",he,[o[4]||(o[4]=a("span",null,"指数简称",-1)),e(f,{content:"点击指数名称可查看详情",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(g))]),_:1})]),_:1})])]),default:r(t=>[e(Z,{type:"text",onClick:w=>X(t.row)},{default:r(()=>[G(_(t.row.name),1)]),_:2},1032,["onClick"])]),_:1}),e(c,{label:"5日涨跌幅",width:"120",sortable:"custom",prop:"return_5",align:"center"},{header:r(()=>[a("div",we,[o[5]||(o[5]=a("span",null,"5日涨跌幅",-1)),e(f,{content:"5日内的价格变化百分比",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(g))]),_:1})]),_:1})])]),default:r(t=>[a("div",ve,[a("span",{class:v({up:Number(t.row.return_5)>0,down:Number(t.row.return_5)<0})},_(N(t.row.return_5)),3),a("div",be,[Number(t.row.return_5)>0?(d(),i(s,{key:0},{default:r(()=>[e(l(F))]),_:1})):Number(t.row.return_5)<0?(d(),i(s,{key:1},{default:r(()=>[e(l(T))]),_:1})):(d(),i(s,{key:2},{default:r(()=>[e(l(U))]),_:1}))])])]),_:1}),e(c,{label:"RPS_5",width:"170",sortable:"custom",prop:"RPS_5",align:"center"},{header:r(()=>[a("div",Re,[o[6]||(o[6]=a("span",null,"RPS_5",-1)),e(f,{content:"相对强度指标，值越高表示相对强度越强",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(g))]),_:1})]),_:1})])]),default:r(t=>[a("div",Se,[e(I,{percentage:t.row.RPS_5,color:z(t.row.RPS_5),format:w=>w.toFixed(1),"stroke-width":18,"text-inside":!0,"show-text":!0},null,8,["percentage","color","format"]),a("div",{class:v(["rps-rank",D(t.row.RPS_5)])},_(V(t.row.RPS_5)),3)])]),_:1}),e(c,{label:"20日涨跌幅",width:"120",sortable:"custom",prop:"return_20",align:"center"},{header:r(()=>[a("div",xe,[o[7]||(o[7]=a("span",null,"20日涨跌幅",-1)),e(f,{content:"20日内的价格变化百分比",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(g))]),_:1})]),_:1})])]),default:r(t=>[a("div",ke,[a("span",{class:v({up:Number(t.row.return_20)>0,down:Number(t.row.return_20)<0})},_(N(t.row.return_20)),3),a("div",Pe,[Number(t.row.return_20)>0?(d(),i(s,{key:0},{default:r(()=>[e(l(F))]),_:1})):Number(t.row.return_20)<0?(d(),i(s,{key:1},{default:r(()=>[e(l(T))]),_:1})):(d(),i(s,{key:2},{default:r(()=>[e(l(U))]),_:1}))])])]),_:1}),e(c,{label:"RPS_20",width:"170",sortable:"custom",prop:"RPS_20",align:"center"},{header:r(()=>[a("div",ye,[o[8]||(o[8]=a("span",null,"RPS_20",-1)),e(f,{content:"相对强度指标，值越高表示相对强度越强",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(g))]),_:1})]),_:1})])]),default:r(t=>[a("div",Ne,[e(I,{percentage:Number(t.row.RPS_20),color:z(t.row.RPS_20),format:w=>w.toFixed(1),"stroke-width":18,"text-inside":!0,"show-text":!0},null,8,["percentage","color","format"]),a("div",{class:v(["rps-rank",D(t.row.RPS_20)])},_(V(t.row.RPS_20)),3)])]),_:1}),e(c,{label:"60日涨跌幅",width:"120",sortable:"custom",prop:"return_60",align:"center"},{header:r(()=>[a("div",Ce,[o[9]||(o[9]=a("span",null,"60日涨跌幅",-1)),e(f,{content:"60日内的价格变化百分比",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(g))]),_:1})]),_:1})])]),default:r(t=>[a("div",ze,[a("span",{class:v({up:Number(t.row.return_60)>0,down:Number(t.row.return_60)<0})},_(N(t.row.return_60)),3),a("div",Ve,[Number(t.row.return_60)>0?(d(),i(s,{key:0},{default:r(()=>[e(l(F))]),_:1})):Number(t.row.return_60)<0?(d(),i(s,{key:1},{default:r(()=>[e(l(T))]),_:1})):(d(),i(s,{key:2},{default:r(()=>[e(l(U))]),_:1}))])])]),_:1}),e(c,{label:"RPS_60",width:"170",sortable:"custom",prop:"RPS_60",align:"center"},{header:r(()=>[a("div",De,[o[10]||(o[10]=a("span",null,"RPS_60",-1)),e(f,{content:"相对强度指标，值越高表示相对强度越强",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(g))]),_:1})]),_:1})])]),default:r(t=>[a("div",Ie,[e(I,{percentage:Number(t.row.RPS_60),color:z(t.row.RPS_60),format:w=>w.toFixed(1),"stroke-width":18,"text-inside":!0,"show-text":!0},null,8,["percentage","color","format"]),a("div",{class:v(["rps-rank",D(t.row.RPS_60)])},_(V(t.row.RPS_60)),3)])]),_:1})]),_:1},8,["data","default-sort"]),a("div",Be,[C.value.length>10?(d(),i(te,{key:0,layout:"total, sizes, prev, pager, next",total:C.value.length,"page-sizes":[10,20,50,100],"page-size":x.value,"onUpdate:pageSize":o[2]||(o[2]=t=>x.value=t),"current-page":p.value,"onUpdate:currentPage":o[3]||(o[3]=t=>p.value=t),onSizeChange:Q,onCurrentChange:W},null,8,["total","page-size","current-page"])):B("",!0)])]),_:1})])):B("",!0),!b.value&&R.value.length===0?(d(),i(ne,{key:1,description:"暂无RPS数据"})):B("",!0)])),[[oe,b.value]])}}}),Ee=ce(Fe,[["__scopeId","data-v-38e0d92c"]]);export{Ee as default};
