import{d as te,a as h,z as q,y as re,B as ne,D as oe,G as ae,c as E,g as V,f as i,e,w as r,i as c,E as M,b as a,k as T,t as _,l,a0 as f,L as w,a1 as I,a2 as B,a3 as F,M as le,u as se,o as u,_ as ue}from"./index-C226T20F.js";import{g as de}from"./strategyApi-k6Xiqg1q.js";const ie={class:"index-rps-view","element-loading-text":"正在加载指数RPS数据..."},ce={key:0,class:"rps-data-section"},_e={class:"table-header"},pe={class:"table-controls"},fe={class:"custom-header"},me={class:"custom-header"},ge={class:"change-percent-cell"},he={class:"trend-indicator"},we={class:"custom-header"},ve={class:"rps-cell"},be={class:"custom-header"},Re={class:"change-percent-cell"},Se={class:"trend-indicator"},xe={class:"custom-header"},ke={class:"rps-cell"},Pe={class:"custom-header"},ye={class:"change-percent-cell"},Ne={class:"trend-indicator"},Ce={class:"custom-header"},ze={class:"rps-cell"},De={class:"table-footer"},Ve=te({__name:"IndexRpsView",setup(Ie){const v=h(!1),U=se(),b=h([]),$=h(""),R=h(""),m=h(1),S=h(2e3),P=n=>{const o=typeof n=="number"?n:parseFloat(String(n));return Number.isFinite(o)?`${o>0?"+":""}${o.toFixed(2)}%`:"-"},y=q(()=>{let n=b.value;return R.value&&(n=n.filter(o=>o.name.includes(R.value))),n}),A=q(()=>{const n=(m.value-1)*S.value,o=n+S.value;return y.value.slice(n,o)}),G=()=>"RPS_5",N=n=>n>=90?"#f56c6c":n>=80?"#e6a23c":n>=70?"#67c23a":"#909399",C=n=>n>=90?"极强":n>=80?"强势":n>=70?"良好":n>=50?"一般":"弱势",z=n=>n>=90?"rank-excellent":n>=80?"rank-strong":n>=70?"rank-good":n>=50?"rank-normal":"rank-weak",K=({row:n})=>{const o=n.RPS_5;return o>=90?"row-excellent":o>=80?"row-strong":o>=70?"row-good":""},L=n=>{n.prop&&n.order&&b.value.sort((o,x)=>{const d=Number(o[n.prop]??0),k=Number(x[n.prop]??0);return n.order==="ascending"?d-k:k-d})},j=n=>{S.value=n,m.value=1},H=n=>{m.value=n},J=n=>{U.push({path:"/stock-list",query:{dc_concept:n.name}})},O=async()=>{if(!v.value){v.value=!0;try{const o=await de("5,20,60");b.value=o.data,$.value=o.query_time,M.success("RPS数据加载成功")}catch(n){console.error("加载RPS数据失败:",n),M.error("加载RPS数据失败，请稍后重试")}finally{v.value=!1}}};return re(()=>{O()}),ne(R,()=>{m.value=1}),(n,o)=>{const x=c("el-input"),d=c("el-table-column"),k=c("el-tag"),s=c("el-icon"),p=c("el-tooltip"),Q=c("el-button"),D=c("el-progress"),W=c("el-table"),X=c("el-pagination"),Y=c("el-card"),Z=c("el-empty"),ee=ae("loading");return oe((u(),E("div",ie,[b.value.length>0?(u(),E("div",ce,[e(Y,{shadow:"hover"},{header:r(()=>[a("div",_e,[a("div",pe,[e(x,{modelValue:R.value,"onUpdate:modelValue":o[0]||(o[0]=t=>R.value=t),placeholder:"搜索指数名称","prefix-icon":l(le),clearable:"",style:{width:"200px"}},null,8,["modelValue","prefix-icon"])])])]),default:r(()=>[e(W,{data:A.value,stripe:"",border:"",style:{width:"100%"},"default-sort":{prop:G(),order:"descending"},height:"600","row-class-name":K,"highlight-current-row":"",onSortChange:L},{default:r(()=>[e(d,{type:"index",label:"#",width:"50",fixed:"left",align:"center"}),e(d,{prop:"ts_code",label:"ts_code",width:"150",sortable:"custom",fixed:"left",align:"center"},{default:r(t=>[e(k,{size:"small",effect:"plain"},{default:r(()=>[T(_(t.row.ts_code),1)]),_:2},1024)]),_:1}),e(d,{prop:"name",label:"name",width:"150",sortable:"custom",fixed:"left"},{header:r(()=>[a("div",fe,[o[3]||(o[3]=a("span",null,"指数简称",-1)),e(p,{content:"点击指数名称可查看详情",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(f))]),_:1})]),_:1})])]),default:r(t=>[e(Q,{type:"text",onClick:g=>J(t.row)},{default:r(()=>[T(_(t.row.name),1)]),_:2},1032,["onClick"])]),_:1}),e(d,{label:"5日涨跌幅",width:"120",sortable:"custom",prop:"return_5",align:"center"},{header:r(()=>[a("div",me,[o[4]||(o[4]=a("span",null,"5日涨跌幅",-1)),e(p,{content:"5日内的价格变化百分比",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(f))]),_:1})]),_:1})])]),default:r(t=>[a("div",ge,[a("span",{class:w({up:Number(t.row.return_5)>0,down:Number(t.row.return_5)<0})},_(P(t.row.return_5)),3),a("div",he,[Number(t.row.return_5)>0?(u(),i(s,{key:0},{default:r(()=>[e(l(I))]),_:1})):Number(t.row.return_5)<0?(u(),i(s,{key:1},{default:r(()=>[e(l(B))]),_:1})):(u(),i(s,{key:2},{default:r(()=>[e(l(F))]),_:1}))])])]),_:1}),e(d,{label:"RPS_5",width:"170",sortable:"custom",prop:"RPS_5",align:"center"},{header:r(()=>[a("div",we,[o[5]||(o[5]=a("span",null,"RPS_5",-1)),e(p,{content:"相对强度指标，值越高表示相对强度越强",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(f))]),_:1})]),_:1})])]),default:r(t=>[a("div",ve,[e(D,{percentage:t.row.RPS_5,color:N(t.row.RPS_5),format:g=>g.toFixed(1),"stroke-width":18,"text-inside":!0,"show-text":!0},null,8,["percentage","color","format"]),a("div",{class:w(["rps-rank",z(t.row.RPS_5)])},_(C(t.row.RPS_5)),3)])]),_:1}),e(d,{label:"20日涨跌幅",width:"120",sortable:"custom",prop:"return_20",align:"center"},{header:r(()=>[a("div",be,[o[6]||(o[6]=a("span",null,"20日涨跌幅",-1)),e(p,{content:"20日内的价格变化百分比",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(f))]),_:1})]),_:1})])]),default:r(t=>[a("div",Re,[a("span",{class:w({up:Number(t.row.return_20)>0,down:Number(t.row.return_20)<0})},_(P(t.row.return_20)),3),a("div",Se,[Number(t.row.return_20)>0?(u(),i(s,{key:0},{default:r(()=>[e(l(I))]),_:1})):Number(t.row.return_20)<0?(u(),i(s,{key:1},{default:r(()=>[e(l(B))]),_:1})):(u(),i(s,{key:2},{default:r(()=>[e(l(F))]),_:1}))])])]),_:1}),e(d,{label:"RPS_20",width:"170",sortable:"custom",prop:"RPS_20",align:"center"},{header:r(()=>[a("div",xe,[o[7]||(o[7]=a("span",null,"RPS_20",-1)),e(p,{content:"相对强度指标，值越高表示相对强度越强",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(f))]),_:1})]),_:1})])]),default:r(t=>[a("div",ke,[e(D,{percentage:Number(t.row.RPS_20),color:N(t.row.RPS_20),format:g=>g.toFixed(1),"stroke-width":18,"text-inside":!0,"show-text":!0},null,8,["percentage","color","format"]),a("div",{class:w(["rps-rank",z(t.row.RPS_20)])},_(C(t.row.RPS_20)),3)])]),_:1}),e(d,{label:"60日涨跌幅",width:"120",sortable:"custom",prop:"return_60",align:"center"},{header:r(()=>[a("div",Pe,[o[8]||(o[8]=a("span",null,"60日涨跌幅",-1)),e(p,{content:"60日内的价格变化百分比",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(f))]),_:1})]),_:1})])]),default:r(t=>[a("div",ye,[a("span",{class:w({up:Number(t.row.return_60)>0,down:Number(t.row.return_60)<0})},_(P(t.row.return_60)),3),a("div",Ne,[Number(t.row.return_60)>0?(u(),i(s,{key:0},{default:r(()=>[e(l(I))]),_:1})):Number(t.row.return_60)<0?(u(),i(s,{key:1},{default:r(()=>[e(l(B))]),_:1})):(u(),i(s,{key:2},{default:r(()=>[e(l(F))]),_:1}))])])]),_:1}),e(d,{label:"RPS_60",width:"170",sortable:"custom",prop:"RPS_60",align:"center"},{header:r(()=>[a("div",Ce,[o[9]||(o[9]=a("span",null,"RPS_60",-1)),e(p,{content:"相对强度指标，值越高表示相对强度越强",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(f))]),_:1})]),_:1})])]),default:r(t=>[a("div",ze,[e(D,{percentage:Number(t.row.RPS_60),color:N(t.row.RPS_60),format:g=>g.toFixed(1),"stroke-width":18,"text-inside":!0,"show-text":!0},null,8,["percentage","color","format"]),a("div",{class:w(["rps-rank",z(t.row.RPS_60)])},_(C(t.row.RPS_60)),3)])]),_:1})]),_:1},8,["data","default-sort"]),a("div",De,[y.value.length>10?(u(),i(X,{key:0,layout:"total, sizes, prev, pager, next",total:y.value.length,"page-sizes":[10,20,50,100],"page-size":S.value,"onUpdate:pageSize":o[1]||(o[1]=t=>S.value=t),"current-page":m.value,"onUpdate:currentPage":o[2]||(o[2]=t=>m.value=t),onSizeChange:j,onCurrentChange:H},null,8,["total","page-size","current-page"])):V("",!0)])]),_:1})])):V("",!0),!v.value&&b.value.length===0?(u(),i(Z,{key:1,description:"暂无RPS数据"})):V("",!0)])),[[ee,v.value]])}}}),qe=ue(Ve,[["__scopeId","data-v-82fb3bd0"]]);export{qe as default};
