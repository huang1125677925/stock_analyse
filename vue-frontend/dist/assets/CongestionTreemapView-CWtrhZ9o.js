import{d as f,a as i,c as g,e as r,w as u,i as d,b as l,k as v,Z as h,E as n,u as y,o as w,_ as V}from"./index-CPDmQmJM.js";import{I as x}from"./IndustryTreemap-Du4t0PiV.js";import{g as C}from"./personalHoldingsApi-B8DYFkpa.js";import"./index-ElshY9iF.js";import"./industryApi-Co8_-CYH.js";const k={class:"congestion-page"},T={class:"header-controls"},b=f({__name:"CongestionTreemapView",setup(B){const c=y(),t=i(!1),o=i([]),m=async()=>{if(t.value){if(!h()){n.error("请先登录后再启用“仅看我的”"),t.value=!1,c.push("/login");return}try{const a=await C(),e=Array.from(new Set((a.data?.list||[]).map(s=>(s.industry||"").trim()).filter(s=>!!s)));o.value=e,e.length===0?n.warning("您的持有/关注列表为空，当前无可筛选的行业"):n.success(`已启用，仅展示 ${e.length} 个相关行业`)}catch(a){console.error("获取个人持有/关注列表失败:",a),n.error("获取个人行业列表失败，请稍后重试"),t.value=!1,o.value=[]}}else o.value=[]};return(a,e)=>{const s=d("el-checkbox"),p=d("el-card");return w(),g("div",k,[r(p,null,{default:u(()=>[l("div",T,[e[2]||(e[2]=l("h3",null,"行业矩形树图",-1)),l("div",null,[r(s,{modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=_=>t.value=_),onChange:m},{default:u(()=>[...e[1]||(e[1]=[v("仅看我的",-1)])]),_:1},8,["modelValue"])])]),r(x,{"industry-whitelist":o.value},null,8,["industry-whitelist"])]),_:1})])}}}),H=V(b,[["__scopeId","data-v-8da7509e"]]);export{H as default};
