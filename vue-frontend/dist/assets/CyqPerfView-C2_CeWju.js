import{x as E,d as N,a as v,r as j,y as O,c as g,e as a,w as l,i as s,E as P,b as d,l as M,O as F,k as h,M as I,D as T,f as Y,g as Z,G as z,F as G,A as L,o as c,_ as R}from"./index-DUOcnsZX.js";async function H(D){return(await E.get("/django/api/tasks/cyq-perf/",{params:D})).data}const J={class:"cyq-perf-view"},K={class:"header-content"},Q={class:"header-actions"},W={class:"card-header"},X=N({__name:"CyqPerfView",setup(D){const i=v(!1),_=v([]),b=v([]);function V(t){return t.toISOString().slice(0,10).replace(/-/g,"")}const w=()=>V(new Date),n=j({ts_code:"000001.SZ",start_date:(t=>V(new Date(Date.now()-t*24*60*60*1e3)))(30),end_date:w(),trade_date:void 0,fields:void 0});function k(t){if(t.records&&Array.isArray(t.records))return t.records;if(t.fields&&t.items){const e=t.fields;return t.items.map(m=>{const u={};return e.forEach((f,r)=>{u[f]=m[r]}),u})}return[]}async function p(){i.value=!0;try{const t=await H({...n}),e=k(t);_.value=e,b.value=e.length?Object.keys(e[0]):[]}catch(t){P.error(t?.message||"数据加载失败")}finally{i.value=!1}}function C(){p()}function S(){p()}return O(()=>{p()}),(t,e)=>{const m=s("el-button"),u=s("el-card"),f=s("el-input"),r=s("el-form-item"),y=s("el-date-picker"),x=s("el-form"),q=s("el-table-column"),A=s("el-table"),U=s("el-empty"),B=z("loading");return c(),g("div",J,[a(u,{class:"page-header"},{default:l(()=>[d("div",K,[e[6]||(e[6]=d("h2",null,"每日筹码及胜率",-1)),d("div",Q,[a(m,{type:"primary",icon:M(F),onClick:S,loading:i.value},{default:l(()=>[...e[5]||(e[5]=[h("刷新",-1)])]),_:1},8,["icon","loading"])])])]),_:1}),a(u,{class:"search-section"},{header:l(()=>[d("div",W,[e[8]||(e[8]=d("span",null,"查询条件",-1)),a(m,{type:"primary",link:"",icon:M(I),onClick:C},{default:l(()=>[...e[7]||(e[7]=[h("搜索",-1)])]),_:1},8,["icon"])])]),default:l(()=>[a(x,{inline:!0,model:n,"label-width":"100px"},{default:l(()=>[a(r,{label:"股票代码"},{default:l(()=>[a(f,{modelValue:n.ts_code,"onUpdate:modelValue":e[0]||(e[0]=o=>n.ts_code=o),placeholder:"如 000001.SZ",clearable:""},null,8,["modelValue"])]),_:1}),a(r,{label:"开始日期"},{default:l(()=>[a(y,{modelValue:n.start_date,"onUpdate:modelValue":e[1]||(e[1]=o=>n.start_date=o),type:"date",format:"YYYYMMDD","value-format":"YYYYMMDD"},null,8,["modelValue"])]),_:1}),a(r,{label:"结束日期"},{default:l(()=>[a(y,{modelValue:n.end_date,"onUpdate:modelValue":e[2]||(e[2]=o=>n.end_date=o),type:"date",format:"YYYYMMDD","value-format":"YYYYMMDD"},null,8,["modelValue"])]),_:1}),a(r,{label:"交易日期"},{default:l(()=>[a(y,{modelValue:n.trade_date,"onUpdate:modelValue":e[3]||(e[3]=o=>n.trade_date=o),type:"date",format:"YYYYMMDD","value-format":"YYYYMMDD"},null,8,["modelValue"])]),_:1}),a(r,{label:"字段列表"},{default:l(()=>[a(f,{modelValue:n.fields,"onUpdate:modelValue":e[4]||(e[4]=o=>n.fields=o),placeholder:"逗号分隔，可留空",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),a(u,{class:"table-section"},{header:l(()=>[...e[9]||(e[9]=[d("div",{class:"card-header"},[d("span",null,"数据列表")],-1)])]),default:l(()=>[T((c(),Y(A,{data:_.value,height:"560",style:{width:"100%"}},{default:l(()=>[(c(!0),g(G,null,L(b.value,o=>(c(),Y(q,{key:o,prop:o,label:o,"min-width":"120"},null,8,["prop","label"]))),128))]),_:1},8,["data"])),[[B,i.value]]),!i.value&&_.value.length===0?(c(),Y(U,{key:0,description:"暂无数据"})):Z("",!0)]),_:1})])}}}),te=R(X,[["__scopeId","data-v-e60d2b73"]]);export{te as default};
