import{x as N,d as j,a as Y,r as O,y as F,c as h,e as t,w as a,i as s,E as I,b as d,l as k,O as z,k as w,M as G,D as L,f as g,g as R,G as q,F as J,A as K,o as c,_ as P}from"./index-D8Wty6Yi.js";async function Q(V){return(await N.get("/django/api/tasks/hsgt-top10/",{params:V})).data}const W={class:"hsgt-top10-view"},X={class:"header-content"},Z={class:"header-actions"},$={class:"card-header"},ee=j({__name:"HsgtTop10View",setup(V){const r=Y(!1),p=Y([]),b=Y([]);function D(l){return l.toISOString().slice(0,10).replace(/-/g,"")}const x=()=>D(new Date),n=O({market_type:1,ts_code:"",start_date:(l=>D(new Date(Date.now()-l*24*60*60*1e3)))(7),end_date:x(),trade_date:void 0,fields:void 0});function C(l){if(l.records&&Array.isArray(l.records))return l.records;if(l.fields&&l.items){const e=l.fields;return l.items.map(m=>{const i={};return e.forEach((_,v)=>{i[_]=m[v]}),i})}return[]}async function f(){r.value=!0;try{const l=await Q({...n}),e=C(l);p.value=e,b.value=e.length?Object.keys(e[0]):[]}catch(l){I.error(l?.message||"数据加载失败")}finally{r.value=!1}}function S(){f()}function U(){f()}return F(()=>{f()}),(l,e)=>{const m=s("el-button"),i=s("el-card"),_=s("el-option"),v=s("el-select"),u=s("el-form-item"),M=s("el-input"),y=s("el-date-picker"),A=s("el-form"),T=s("el-table-column"),B=s("el-table"),E=s("el-empty"),H=q("loading");return c(),h("div",W,[t(i,{class:"page-header"},{default:a(()=>[d("div",X,[e[7]||(e[7]=d("h2",null,"沪深股通十大成交股",-1)),d("div",Z,[t(m,{type:"primary",icon:k(z),onClick:U,loading:r.value},{default:a(()=>[...e[6]||(e[6]=[w("刷新",-1)])]),_:1},8,["icon","loading"])])])]),_:1}),t(i,{class:"search-section"},{header:a(()=>[d("div",$,[e[9]||(e[9]=d("span",null,"查询条件",-1)),t(m,{type:"primary",link:"",icon:k(G),onClick:S},{default:a(()=>[...e[8]||(e[8]=[w("搜索",-1)])]),_:1},8,["icon"])])]),default:a(()=>[t(A,{inline:!0,model:n,"label-width":"100px"},{default:a(()=>[t(u,{label:"市场类型"},{default:a(()=>[t(v,{modelValue:n.market_type,"onUpdate:modelValue":e[0]||(e[0]=o=>n.market_type=o),placeholder:"选择市场",style:{width:"160px"}},{default:a(()=>[t(_,{label:"上交所(1)",value:"1"}),t(_,{label:"深交所(3)",value:"3"})]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"股票代码"},{default:a(()=>[t(M,{modelValue:n.ts_code,"onUpdate:modelValue":e[1]||(e[1]=o=>n.ts_code=o),placeholder:"选填，如 600000.SH",clearable:""},null,8,["modelValue"])]),_:1}),t(u,{label:"开始日期"},{default:a(()=>[t(y,{modelValue:n.start_date,"onUpdate:modelValue":e[2]||(e[2]=o=>n.start_date=o),type:"date",format:"YYYYMMDD","value-format":"YYYYMMDD"},null,8,["modelValue"])]),_:1}),t(u,{label:"结束日期"},{default:a(()=>[t(y,{modelValue:n.end_date,"onUpdate:modelValue":e[3]||(e[3]=o=>n.end_date=o),type:"date",format:"YYYYMMDD","value-format":"YYYYMMDD"},null,8,["modelValue"])]),_:1}),t(u,{label:"交易日期"},{default:a(()=>[t(y,{modelValue:n.trade_date,"onUpdate:modelValue":e[4]||(e[4]=o=>n.trade_date=o),type:"date",format:"YYYYMMDD","value-format":"YYYYMMDD"},null,8,["modelValue"])]),_:1}),t(u,{label:"字段列表"},{default:a(()=>[t(M,{modelValue:n.fields,"onUpdate:modelValue":e[5]||(e[5]=o=>n.fields=o),placeholder:"逗号分隔，可留空",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),t(i,{class:"table-section"},{header:a(()=>[...e[10]||(e[10]=[d("div",{class:"card-header"},[d("span",null,"数据列表")],-1)])]),default:a(()=>[L((c(),g(B,{data:p.value,height:"560",style:{width:"100%"}},{default:a(()=>[(c(!0),h(J,null,K(b.value,o=>(c(),g(T,{key:o,prop:o,label:o,"min-width":"120"},null,8,["prop","label"]))),128))]),_:1},8,["data"])),[[H,r.value]]),!r.value&&p.value.length===0?(c(),g(E,{key:0,description:"暂无数据"})):R("",!0)]),_:1})])}}}),ae=P(ee,[["__scopeId","data-v-56fac078"]]);export{ae as default};
