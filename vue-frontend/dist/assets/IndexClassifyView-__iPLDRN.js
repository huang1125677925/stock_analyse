import{d as A,a as f,r as k,z as C,y as F,c as b,e,w as a,i as n,x as G,b as g,f as w,g as H,k as m,t as z,u as J,o as d,_ as K}from"./index-Bun73MF3.js";const Q={class:"index-classify-view"},W={class:"form-row"},X={key:2},Y={key:0,class:"table-wrapper"},Z={class:"pagination-container"},ee=A({__name:"IndexClassifyView",setup(te){const V=J(),v=f(!1),c=f(""),i=k({}),r=f(1),u=f(20),p=k({level:""}),L=C(()=>i.records?.length||0),S=C(()=>{const l=i.records||[],t=(r.value-1)*u.value,_=t+u.value;return l.slice(t,_)});function j(l){switch(l){case"L1":return"danger";case"L2":return"warning";case"L3":return"success";default:return"info"}}function B(l){u.value=l,r.value=1}function D(l){r.value=l}function N(){p.level="",r.value=1}function T(l){V.push({name:"sw-industry-daily",query:{ts_code:l.index_code,industry_name:l.industry_name}})}async function h(){v.value=!0,c.value="";try{const l={};p.level&&(l.level=p.level);const t=await G.get("/django/api/index/sw-index-classify/",{params:l});Object.assign(i,t.data||{}),r.value=1}catch(l){c.value=l?.message||"请求失败",Object.assign(i,{})}finally{v.value=!1}}return F(()=>{h()}),(l,t)=>{const _=n("el-option"),I=n("el-select"),x=n("el-form-item"),y=n("el-button"),U=n("el-form"),q=n("el-alert"),O=n("el-skeleton"),s=n("el-table-column"),P=n("el-tag"),R=n("el-table"),E=n("el-pagination"),M=n("el-empty"),$=n("el-card");return d(),b("div",Q,[e($,{shadow:"hover"},{header:a(()=>[...t[3]||(t[3]=[g("div",{class:"card-header"},[g("span",null,"申万行业分类查询")],-1)])]),default:a(()=>[g("div",W,[e(U,{inline:!0,"label-width":"100px"},{default:a(()=>[e(x,{label:"行业级别"},{default:a(()=>[e(I,{modelValue:p.level,"onUpdate:modelValue":t[0]||(t[0]=o=>p.level=o),placeholder:"请选择级别",clearable:"",style:{width:"200px"}},{default:a(()=>[e(_,{label:"一级行业",value:"L1"}),e(_,{label:"二级行业",value:"L2"}),e(_,{label:"三级行业",value:"L3"})]),_:1},8,["modelValue"])]),_:1}),e(x,null,{default:a(()=>[e(y,{type:"primary",loading:v.value,onClick:h},{default:a(()=>[...t[4]||(t[4]=[m("查询",-1)])]),_:1},8,["loading"]),e(y,{onClick:N},{default:a(()=>[...t[5]||(t[5]=[m("重置默认",-1)])]),_:1})]),_:1})]),_:1})]),c.value?(d(),w(q,{key:0,type:"error",closable:!1,title:c.value,class:"mb-12"},null,8,["title"])):H("",!0),v.value&&!c.value?(d(),w(O,{key:1,rows:"6",animated:""})):(d(),b("div",X,[i.records&&i.records.length?(d(),b("div",Y,[e(R,{data:S.value,border:"",height:"520",stripe:"",style:{width:"100%"}},{default:a(()=>[e(s,{prop:"index_code",label:"指数代码","min-width":"120"}),e(s,{prop:"industry_name",label:"行业名称","min-width":"120"}),e(s,{prop:"level",label:"级别","min-width":"100"},{default:a(o=>[e(P,{type:j(o.row.level)},{default:a(()=>[m(z(o.row.level),1)]),_:2},1032,["type"])]),_:1}),e(s,{prop:"industry_code",label:"行业代码","min-width":"120"}),e(s,{prop:"is_pub",label:"是否发布","min-width":"100"},{default:a(o=>[m(z(o.row.is_pub?"是":"否"),1)]),_:1}),e(s,{prop:"parent_code",label:"父级代码","min-width":"120"}),e(s,{prop:"src",label:"来源","min-width":"100"}),e(s,{label:"操作",width:"120",fixed:"right"},{default:a(o=>[e(y,{link:"",type:"primary",size:"small",onClick:le=>T(o.row)},{default:a(()=>[...t[6]||(t[6]=[m(" 查看趋势 ",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),g("div",Z,[e(E,{"current-page":r.value,"onUpdate:currentPage":t[1]||(t[1]=o=>r.value=o),"page-size":u.value,"onUpdate:pageSize":t[2]||(t[2]=o=>u.value=o),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:L.value,onSizeChange:B,onCurrentChange:D},null,8,["current-page","page-size","total"])])])):(d(),w(M,{key:1,description:"暂无数据"}))]))]),_:1})])}}}),ne=K(ee,[["__scopeId","data-v-237f5128"]]);export{ne as default};
