import{d as Y,a as _,x as Z,A as ee,C as te,D as ne,c as R,g as k,f as x,e as n,w as l,i as s,E as C,b as o,k as z,t as i,l as g,a2 as $,F as D,y as ae,L as V,a3 as le,a4 as oe,a5 as re,o as u,_ as se}from"./index-DghMyGCw.js";import{g as ce}from"./strategyApi-BHQBt222.js";const ue={class:"index-rps-view","element-loading-text":"正在加载指数RPS数据..."},ie={key:0,class:"rps-data-section"},de={class:"table-header"},_e={class:"table-controls"},pe={class:"custom-header"},fe={class:"custom-header"},ge={class:"change-percent-cell"},me={class:"trend-indicator"},he={class:"custom-header"},ve={class:"rps-cell"},we={class:"table-footer"},xe=Y({__name:"IndexRpsView",setup(ye){const m=_(!1),d=_([]),P=_(""),y=_(""),p=_(["5","20","60"]),h=_(1),v=_(20),I=Z(()=>{let e=d.value;y.value&&(e=e.filter(c=>c.指数简称.includes(y.value)));const a=(h.value-1)*v.value,w=a+v.value;return e.slice(a,w)}),N=()=>p.value.length>0?`RPS_${p.value[0]}`:"",B=e=>e>=90?"#f56c6c":e>=80?"#e6a23c":e>=70?"#67c23a":"#909399",F=e=>e>=90?"极强":e>=80?"强势":e>=70?"良好":e>=50?"一般":"弱势",E=e=>e>=90?"rank-excellent":e>=80?"rank-strong":e>=70?"rank-good":e>=50?"rank-normal":"rank-weak",L=({row:e})=>{if(p.value.length>0){const a=e[`RPS_${p.value[0]}`];if(a>=90)return"row-excellent";if(a>=80)return"row-strong";if(a>=70)return"row-good"}return""},T=e=>{e.prop&&e.order&&d.value.sort((a,w)=>{const c=a[e.prop],b=w[e.prop];return e.order==="ascending"?c-b:b-c})},U=e=>{v.value=e,h.value=1},q=e=>{h.value=e},A=e=>{C({message:`${e.指数简称} (${e.指数代码})`,type:"info"})},M=e=>e?new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"",j=async()=>{if(!m.value){m.value=!0;try{const e=p.value.join(","),a=await ce(e);d.value=a.data,P.value=a.query_time,C.success("RPS数据加载成功")}catch(e){console.error("加载RPS数据失败:",e),C.error("加载RPS数据失败，请稍后重试")}finally{m.value=!1}}};return ee(()=>{j()}),(e,a)=>{const w=s("el-input"),c=s("el-table-column"),b=s("el-tag"),f=s("el-icon"),S=s("el-tooltip"),K=s("el-button"),G=s("el-progress"),H=s("el-table"),J=s("el-pagination"),O=s("el-card"),Q=s("el-empty"),W=ne("loading");return te((u(),R("div",ue,[d.value.length>0?(u(),R("div",ie,[n(O,{shadow:"hover"},{header:l(()=>[o("div",de,[o("h3",null,"指数RPS强度排名 ("+i(M(P.value))+")",1),o("div",_e,[n(w,{modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=t=>y.value=t),placeholder:"搜索指数名称","prefix-icon":"Search",clearable:"",style:{width:"200px"}},null,8,["modelValue"])])])]),default:l(()=>[n(H,{data:I.value,stripe:"",border:"",style:{width:"100%"},"default-sort":{prop:N(),order:"descending"},height:"600","row-class-name":L,"highlight-current-row":"",onSortChange:T},{default:l(()=>[n(c,{type:"index",label:"#",width:"50",fixed:"left",align:"center"}),n(c,{prop:"指数代码",label:"指数代码",width:"100",sortable:"custom",fixed:"left",align:"center"},{default:l(t=>[n(b,{size:"small",effect:"plain"},{default:l(()=>[z(i(t.row.指数代码),1)]),_:2},1024)]),_:1}),n(c,{prop:"指数简称",label:"指数简称",width:"120",sortable:"custom",fixed:"left"},{header:l(()=>[o("div",pe,[a[3]||(a[3]=o("span",null,"指数简称",-1)),n(S,{content:"点击指数名称可查看详情",placement:"top"},{default:l(()=>[n(f,null,{default:l(()=>[n(g($))]),_:1})]),_:1})])]),default:l(t=>[n(K,{type:"text",onClick:r=>A(t.row)},{default:l(()=>[z(i(t.row.指数简称),1)]),_:2},1032,["onClick"])]),_:1}),(u(!0),R(D,null,ae(p.value,t=>(u(),R(D,{key:t},[n(c,{label:`${t}日涨跌幅`,width:"120",sortable:"custom",prop:`${t}日涨跌幅`,align:"center"},{header:l(()=>[o("div",fe,[o("span",null,i(t)+"日涨跌幅",1),n(S,{content:`${t}日内的价格变化百分比`,placement:"top"},{default:l(()=>[n(f,null,{default:l(()=>[n(g($))]),_:1})]),_:2},1032,["content"])])]),default:l(r=>[o("div",ge,[o("span",{class:V({up:r.row[`${t}日涨跌幅`]>0,down:r.row[`${t}日涨跌幅`]<0})},i(r.row[`${t}日涨跌幅`]>0?"+":"")+i(r.row[`${t}日涨跌幅`].toFixed(2))+"% ",3),o("div",me,[r.row[`${t}日涨跌幅`]>0?(u(),x(f,{key:0},{default:l(()=>[n(g(le))]),_:1})):r.row[`${t}日涨跌幅`]<0?(u(),x(f,{key:1},{default:l(()=>[n(g(oe))]),_:1})):(u(),x(f,{key:2},{default:l(()=>[n(g(re))]),_:1}))])])]),_:2},1032,["label","prop"]),n(c,{label:`RPS_${t}`,width:"170",sortable:"custom",prop:`RPS_${t}`,align:"center"},{header:l(()=>[o("div",he,[o("span",null,"RPS_"+i(t),1),n(S,{content:"相对强度指标，值越高表示相对强度越强",placement:"top"},{default:l(()=>[n(f,null,{default:l(()=>[n(g($))]),_:1})]),_:1})])]),default:l(r=>[o("div",ve,[n(G,{percentage:r.row[`RPS_${t}`],color:B(r.row[`RPS_${t}`]),format:X=>X.toFixed(1),"stroke-width":18,"text-inside":!0,"show-text":!0},null,8,["percentage","color","format"]),o("div",{class:V(["rps-rank",E(r.row[`RPS_${t}`])])},i(F(r.row[`RPS_${t}`])),3)])]),_:2},1032,["label","prop"])],64))),128))]),_:1},8,["data","default-sort"]),o("div",we,[d.value.length>10?(u(),x(J,{key:0,layout:"total, sizes, prev, pager, next",total:d.value.length,"page-sizes":[10,20,50,100],"page-size":v.value,"onUpdate:pageSize":a[1]||(a[1]=t=>v.value=t),"current-page":h.value,"onUpdate:currentPage":a[2]||(a[2]=t=>h.value=t),onSizeChange:U,onCurrentChange:q},null,8,["total","page-size","current-page"])):k("",!0)])]),_:1})])):k("",!0),!m.value&&d.value.length===0?(u(),x(Q,{key:1,description:"暂无RPS数据"})):k("",!0)])),[[W,m.value]])}}}),Se=se(xe,[["__scopeId","data-v-3d210e7f"]]);export{Se as default};
