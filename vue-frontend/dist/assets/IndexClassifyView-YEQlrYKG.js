import{d as E,a as x,r as h,z as F,y as O,c as i,e as l,w as n,i as o,x as T,b,f as _,g as U,k as w,F as V,A as C,o as a,_ as q}from"./index-DflXyc7k.js";const A={class:"index-classify-view"},L={class:"form-row"},M={key:2},G={key:0,class:"table-wrapper"},H={key:1,class:"table-wrapper"},J=E({__name:"IndexClassifyView",setup(K){const m=x(!1),c=x(""),e=h({}),r=h({fields:"index_code,industry,level,name",token:""}),S=F(()=>!e.items||!e.fields?[]:e.items.map(d=>{const t={};return e.fields.forEach((p,u)=>{t[String(p)]=d[u]}),t}));function j(){r.fields="index_code,industry,level,name",r.token=""}async function v(){m.value=!0,c.value="";try{const d=await T.get("/django/api/tasks/index-classify/",{params:{...r}});Object.assign(e,d.data||{})}catch(d){c.value=d?.message||"请求失败",Object.assign(e,{})}finally{m.value=!1}}return O(()=>{v()}),(d,t)=>{const p=o("el-input"),u=o("el-form-item"),y=o("el-button"),B=o("el-form"),I=o("el-alert"),N=o("el-skeleton"),g=o("el-table-column"),k=o("el-table"),D=o("el-empty"),z=o("el-card");return a(),i("div",A,[l(z,{shadow:"hover"},{header:n(()=>[...t[2]||(t[2]=[b("div",{class:"card-header"},[b("span",null,"申万行业分类查询")],-1)])]),default:n(()=>[b("div",L,[l(B,{inline:!0,"label-width":"100px"},{default:n(()=>[l(u,{label:"字段列表"},{default:n(()=>[l(p,{modelValue:r.fields,"onUpdate:modelValue":t[0]||(t[0]=s=>r.fields=s),placeholder:"例如: index_code,industry,level,name"},null,8,["modelValue"])]),_:1}),l(u,{label:"Token"},{default:n(()=>[l(p,{modelValue:r.token,"onUpdate:modelValue":t[1]||(t[1]=s=>r.token=s),placeholder:"可留空，走服务端默认"},null,8,["modelValue"])]),_:1}),l(u,null,{default:n(()=>[l(y,{type:"primary",loading:m.value,onClick:v},{default:n(()=>[...t[3]||(t[3]=[w("查询",-1)])]),_:1},8,["loading"]),l(y,{onClick:j},{default:n(()=>[...t[4]||(t[4]=[w("重置默认",-1)])]),_:1})]),_:1})]),_:1})]),c.value?(a(),_(I,{key:0,type:"error",closable:!1,title:c.value,class:"mb-12"},null,8,["title"])):U("",!0),m.value&&!c.value?(a(),_(N,{key:1,rows:"6",animated:""})):(a(),i("div",M,[e.items&&e.fields?(a(),i("div",G,[l(k,{data:S.value,border:"",height:"520"},{default:n(()=>[(a(!0),i(V,null,C(e.fields,s=>(a(),_(g,{key:String(s),prop:String(s),label:String(s)},null,8,["prop","label"]))),128))]),_:1},8,["data"])])):e.records&&e.records.length?(a(),i("div",H,[l(k,{data:e.records,border:"",height:"520"},{default:n(()=>[(a(!0),i(V,null,C(e.records[0],(s,f)=>(a(),_(g,{key:String(f),prop:String(f),label:String(f)},null,8,["prop","label"]))),128))]),_:1},8,["data"])])):(a(),_(D,{key:2,description:"暂无数据"}))]))]),_:1})])}}}),Q=q(J,[["__scopeId","data-v-285b615c"]]);export{Q as default};
