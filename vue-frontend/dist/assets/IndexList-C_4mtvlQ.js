import{d as T,a as z,r as k,A as M,C as P,D as R,c as v,b as i,e as t,w as o,i as r,T as A,E as y,l as F,L as O,k as d,Z as V,g as D,t as g,o as b,_ as Z}from"./index-B51mQAau.js";const q={class:"index-list","element-loading-text":"正在加载指数数据..."},G={class:"page-header"},H={class:"header-content"},J={class:"header-actions"},Q={class:"search-section"},W={class:"table-section"},X={class:"table-header"},Y={key:0,class:"total-count"},ee={key:0,class:"pagination-wrapper"},te=T({__name:"IndexList",setup(ae){const c=z(!1),w=z([]),n=k({current_page:1,total_pages:0,total_count:0,page_size:20,has_next:!1,has_previous:!1}),s=k({search:"",code:""}),p=async()=>{c.value=!0;try{const a=new URLSearchParams;a.append("page",n.current_page.toString()),a.append("page_size",n.page_size.toString()),s.search.trim()&&a.append("search",s.search.trim()),s.code.trim()&&a.append("code",s.code.trim());const e=await A.get(`/django/api/market/index-basic-data/?${a}`);e.data.code===200?(w.value=e.data.data.list,Object.assign(n,e.data.data.pagination)):y.error(e.data.message||"获取数据失败")}catch(a){console.error("获取指数列表失败:",a),y.error("网络请求失败，请稍后重试")}finally{c.value=!1}},m=()=>{n.current_page=1,p()},S=()=>{s.search="",s.code="",n.current_page=1,p()},L=()=>{p()},I=a=>{n.page_size=a,n.current_page=1,p()},N=a=>{n.current_page=a,p()},U=a=>{y.info(`查看指数详情: ${a.name} (${a.code})`)},x=a=>a?new Date(a).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-";return M(()=>{p()}),(a,e)=>{const u=r("el-button"),h=r("el-card"),C=r("el-input"),f=r("el-form-item"),$=r("el-form"),_=r("el-table-column"),j=r("el-tag"),B=r("el-table"),E=r("el-pagination"),K=R("loading");return P((b(),v("div",q,[i("div",G,[t(h,{shadow:"hover"},{default:o(()=>[i("div",H,[e[5]||(e[5]=i("div",{class:"title-section"},[i("h1",{class:"page-title"},"指数列表"),i("p",{class:"page-subtitle"},"查看和管理股票市场指数基础信息")],-1)),i("div",J,[t(u,{onClick:L,loading:c.value,icon:F(O),type:"primary"},{default:o(()=>[...e[4]||(e[4]=[d(" 刷新数据 ",-1)])]),_:1},8,["loading","icon"])])])]),_:1})]),i("div",Q,[t(h,{shadow:"hover"},{default:o(()=>[t($,{model:s,inline:"",class:"search-form"},{default:o(()=>[t(f,{label:"搜索关键词"},{default:o(()=>[t(C,{modelValue:s.search,"onUpdate:modelValue":e[0]||(e[0]=l=>s.search=l),placeholder:"输入指数代码或名称",clearable:"",style:{width:"200px"},onKeyup:V(m,["enter"])},null,8,["modelValue"])]),_:1}),t(f,{label:"指数代码"},{default:o(()=>[t(C,{modelValue:s.code,"onUpdate:modelValue":e[1]||(e[1]=l=>s.code=l),placeholder:"精确匹配指数代码",clearable:"",style:{width:"150px"},onKeyup:V(m,["enter"])},null,8,["modelValue"])]),_:1}),t(f,null,{default:o(()=>[t(u,{type:"primary",onClick:m,loading:c.value},{default:o(()=>[...e[6]||(e[6]=[d(" 搜索 ",-1)])]),_:1},8,["loading"]),t(u,{onClick:S},{default:o(()=>[...e[7]||(e[7]=[d("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),i("div",W,[t(h,{shadow:"hover"},{header:o(()=>[i("div",X,[e[8]||(e[8]=i("span",null,"指数数据列表",-1)),n.total_count?(b(),v("span",Y," 共 "+g(n.total_count)+" 条记录 ",1)):D("",!0)])]),default:o(()=>[t(B,{data:w.value,stripe:"",border:"",style:{width:"100%"},"empty-text":c.value?"正在加载...":"暂无数据"},{default:o(()=>[t(_,{prop:"id",label:"ID",width:"80",align:"center"}),t(_,{prop:"code",label:"指数代码",width:"120",align:"center"},{default:o(({row:l})=>[t(j,{type:"primary"},{default:o(()=>[d(g(l.code),1)]),_:2},1024)]),_:1}),t(_,{prop:"name",label:"指数名称","min-width":"200","show-overflow-tooltip":""}),t(_,{prop:"created_at",label:"创建时间",width:"180",align:"center"},{default:o(({row:l})=>[d(g(x(l.created_at)),1)]),_:1}),t(_,{prop:"updated_at",label:"更新时间",width:"180",align:"center"},{default:o(({row:l})=>[d(g(x(l.updated_at)),1)]),_:1}),t(_,{label:"操作",width:"120",align:"center",fixed:"right"},{default:o(({row:l})=>[t(u,{type:"primary",size:"small",onClick:oe=>U(l)},{default:o(()=>[...e[9]||(e[9]=[d(" 查看详情 ",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","empty-text"]),n.total_count>0?(b(),v("div",ee,[t(E,{"current-page":n.current_page,"onUpdate:currentPage":e[2]||(e[2]=l=>n.current_page=l),"page-size":n.page_size,"onUpdate:pageSize":e[3]||(e[3]=l=>n.page_size=l),"page-sizes":[10,20,50,100],total:n.total_count,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:I,onCurrentChange:N},null,8,["current-page","page-size","total"])])):D("",!0)]),_:1})])])),[[K,c.value]])}}}),le=Z(te,[["__scopeId","data-v-45423201"]]);export{le as default};
