import{a as B}from"./irmQaApi-CyH3RsDu.js";import{d as F,a as p,r as I,y as N,c as M,e as t,b as d,w as a,i as r,E as Q,k as V,D as U,G as q,f as x,F as R,A as j,t as A,o as g,_ as G}from"./index-B_RXet-9.js";const L={class:"irm-qa-sz-view"},O={class:"header-content"},P={class:"actions"},T={class:"search-section"},Z={class:"table-section"},J={class:"card-header"},K=F({__name:"IrmQaSzView",emits:["loaded"],setup(W,{emit:$}){const E=$,_=p(!1),l=I({tsCode:"",fields:""}),u=p(),c=p([]),k=p([]),h=p(0);function b(i=7){const e=new Date,s=new Date(Date.now()-i*24*60*60*1e3),m=o=>{const S=o.getFullYear(),y=String(o.getMonth()+1).padStart(2,"0"),v=String(o.getDate()).padStart(2,"0"),w=String(o.getHours()).padStart(2,"0"),D=String(o.getMinutes()).padStart(2,"0"),C=String(o.getSeconds()).padStart(2,"0");return`${S}-${y}-${v} ${w}:${D}:${C}`};return[m(s),m(e)]}async function f(){try{_.value=!0;const[i,e]=u.value||b(),s=await B({tsCode:l.tsCode||void 0,pubDateStart:i,pubDateEnd:e,fields:l.fields||void 0});c.value=s.records||[],k.value=c.value.length?Object.keys(c.value[0]):[],h.value=s.count||c.value.length,E("loaded",h.value)}catch(i){Q.error(i?.message||"数据加载失败")}finally{_.value=!1}}function H(){f()}function Y(){f()}function z(){l.tsCode="",l.fields="",u.value=b(),f()}return N(()=>{u.value=b(),f()}),(i,e)=>{const s=r("el-button"),m=r("el-input"),o=r("el-form-item"),S=r("el-date-picker"),y=r("el-form"),v=r("el-card"),w=r("el-table-column"),D=r("el-table"),C=q("loading");return g(),M("div",L,[t(v,{class:"page-header",shadow:"hover"},{header:a(()=>[d("div",O,[e[5]||(e[5]=d("h2",null,"深证 互动易问答",-1)),d("div",P,[t(s,{type:"primary",loading:_.value,onClick:H},{default:a(()=>[...e[3]||(e[3]=[V("查询",-1)])]),_:1},8,["loading"]),t(s,{onClick:z},{default:a(()=>[...e[4]||(e[4]=[V("重置",-1)])]),_:1})])])]),default:a(()=>[d("div",T,[t(y,{inline:!0,model:l,class:"query-form"},{default:a(()=>[t(o,{label:"股票代码"},{default:a(()=>[t(m,{modelValue:l.tsCode,"onUpdate:modelValue":e[0]||(e[0]=n=>l.tsCode=n),placeholder:"可选，例：000001.SZ",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),t(o,{label:"发布日期范围"},{default:a(()=>[t(S,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=n=>u.value=n),type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),t(o,{label:"字段"},{default:a(()=>[t(m,{modelValue:l.fields,"onUpdate:modelValue":e[2]||(e[2]=n=>l.fields=n),placeholder:"可选，逗号分隔，留空为默认字段",style:{width:"320px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1}),d("div",Z,[t(v,null,{header:a(()=>[d("div",J,[d("span",null,"问答列表（"+A(h.value)+" 条）",1),t(s,{link:"",onClick:Y},{default:a(()=>[...e[6]||(e[6]=[V("刷新",-1)])]),_:1})])]),default:a(()=>[U((g(),x(D,{data:c.value,style:{width:"100%"},height:"560"},{default:a(()=>[(g(!0),M(R,null,j(k.value,n=>(g(),x(w,{key:n,prop:n,label:n,"show-overflow-tooltip":""},null,8,["prop","label"]))),128))]),_:1},8,["data"])),[[C,_.value]])]),_:1})])])}}}),te=G(K,[["__scopeId","data-v-c87d869b"]]);export{te as default};
