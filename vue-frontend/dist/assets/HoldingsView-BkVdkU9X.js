import{d as V,a as m,y as B,c as L,e,w as t,i as r,Z as f,E as l,u as N,b as c,D as $,G as M,f as P,k as d,t as h,l as w,aa as z,O as A,o as v,_ as G}from"./index-orgCiLiJ.js";import{g as I,d as O}from"./personalHoldingsApi-BXsdIuJF.js";const R={class:"holdings-view"},S={class:"header-content"},T={class:"header-actions"},Z={class:"table-container"},j=V({__name:"HoldingsView",setup(q){const _=N(),i=m(!1),g=m([]),p=async()=>{if(!f()){l.error("请先登录后再访问个人中心"),_.push("/login");return}i.value=!0;try{const n=await I();g.value=n.data.list,l.success(n.message||"列表加载成功")}catch(n){l.error(n?.message||"列表加载失败")}finally{i.value=!1}},y=async n=>{if(!f()){l.error("请先登录后再进行操作"),_.push("/login");return}try{const a=await O(n);l.success(a.message||"删除成功"),p()}catch(a){l.error(a?.message||"删除失败")}};B(()=>{p()});const b=n=>{_.push(`/stock-history/${n}`)};return(n,a)=>{const u=r("el-button"),s=r("el-table-column"),k=r("el-tag"),C=r("el-popconfirm"),D=r("el-table"),H=r("el-card"),x=M("loading");return v(),L("div",R,[e(H,{class:"page-header",shadow:"never"},{header:t(()=>[c("div",S,[a[1]||(a[1]=c("h2",null,"个人中心 - 持有/关注股票",-1)),c("div",T,[e(u,{type:"primary",icon:w(A),onClick:p,loading:i.value},{default:t(()=>[...a[0]||(a[0]=[d("刷新列表",-1)])]),_:1},8,["icon","loading"])])])]),default:t(()=>[c("div",Z,[$((v(),P(D,{data:g.value,border:"",stripe:"",style:{width:"100%"}},{default:t(()=>[e(s,{prop:"stock_code",label:"股票代码","min-width":"120",align:"center","header-align":"center"}),e(s,{prop:"stock_name",label:"股票名称","min-width":"160",align:"center","header-align":"center"},{default:t(o=>[e(u,{type:"primary",link:"",onClick:E=>b(o.row.stock_code)},{default:t(()=>[d(h(o.row.stock_name),1)]),_:2},1032,["onClick"])]),_:1}),e(s,{prop:"industry",label:"行业","min-width":"140",align:"center","header-align":"center"}),e(s,{prop:"relation_type",label:"类型","min-width":"120",align:"center","header-align":"center"},{default:t(o=>[e(k,{type:o.row.relation_type==="HELD"?"warning":"success"},{default:t(()=>[d(h(o.row.relation_type==="HELD"?"持有":"关注"),1)]),_:2},1032,["type"])]),_:1}),e(s,{prop:"created_at",label:"创建时间","min-width":"180",align:"center","header-align":"center"}),e(s,{label:"操作","min-width":"160",align:"center","header-align":"center"},{default:t(o=>[e(C,{title:"确认删除该记录？",onConfirm:E=>y(o.row.id)},{reference:t(()=>[e(u,{type:"danger",size:"small",icon:w(z)},{default:t(()=>[...a[2]||(a[2]=[d("删除",-1)])]),_:1},8,["icon"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[x,i.value]])])]),_:1})])}}}),K=G(j,[["__scopeId","data-v-663e4482"]]);export{K as default};
