import{x as k,d as D,a as N,y as T,z as x,c as l,e as r,w as i,i as u,b as e,F as C,A as E,u as F,o as _,t as h,_ as L}from"./index-Bun73MF3.js";async function v(p,c=50){return(await k.get("/django/api/tasks/git-info/",{params:{repo_path:p,limit:c}})).data}const j={class:"home"},B={class:"welcome-content"},M={class:"feature-updates-list"},V={class:"update-header"},b={class:"update-meta"},O={class:"update-date"},P={class:"update-content"},S={class:"update-description"},U=D({__name:"HomeView",setup(p){F();const c=N([]),m=async()=>{try{const a="/root/stock_analyse",t="/root/django/stock_data_service",[s,o]=await Promise.allSettled([v(a,1e3),v(t,1e3)]),n=(R,I)=>R.map(g=>({date:new Date(g.authored_datetime).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),content:`${I}${g.message}`})),d=s.status==="fulfilled"?s.value.records:[],y=o.status==="fulfilled"?o.value.records:[];s.status==="rejected"&&console.warn("前端提交记录加载失败:",s.reason),o.status==="rejected"&&console.warn("后端提交记录加载失败:",o.reason),c.value=[...n(d,"【前端】："),...n(y,"【后端】：")]}catch(a){console.error("加载功能迭代失败:",a)}};T(()=>{m()});const w=x(()=>[...c.value].sort((a,t)=>new Date(t.date).getTime()-new Date(a.date).getTime()));return(a,t)=>{const f=u("el-card"),s=u("el-col"),o=u("el-row");return _(),l("div",j,[r(o,{gutter:20},{default:i(()=>[r(s,{span:24},{default:i(()=>[r(f,{class:"welcome-card"},{default:i(()=>[e("div",B,[t[0]||(t[0]=e("h2",null,"平台功能迭代",-1)),t[1]||(t[1]=e("p",null,"查看平台最新的功能更新和版本发布历史，了解系统的持续改进和优化。",-1)),e("div",M,[(_(!0),l(C,null,E(w.value,(n,d)=>(_(),l("div",{key:d,class:"update-item"},[e("div",V,[e("div",b,[e("span",O,h(n.date),1)])]),e("div",P,[e("p",S,h(n.content),1)])]))),128))])])]),_:1})]),_:1}),r(s,{span:8})]),_:1})])}}}),A=L(U,[["__scopeId","data-v-6e392d92"]]);export{A as default};
