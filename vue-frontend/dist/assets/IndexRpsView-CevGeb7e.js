import{d as Z,a as g,z as E,y as ee,B as te,D as re,G as ne,c as M,g as V,f as i,e,w as r,i as c,E as I,b as o,k as T,t as _,l,a2 as f,L as h,a3 as N,a4 as B,a5 as F,M as ae,o as d,_ as oe}from"./index-DkT5_nCy.js";import{g as le}from"./strategyApi-DAMKMKLB.js";const se={class:"index-rps-view","element-loading-text":"正在加载指数RPS数据..."},de={key:0,class:"rps-data-section"},ue={class:"table-header"},ie={class:"table-controls"},ce={class:"custom-header"},_e={class:"custom-header"},pe={class:"change-percent-cell"},fe={class:"trend-indicator"},me={class:"custom-header"},we={class:"rps-cell"},ge={class:"custom-header"},he={class:"change-percent-cell"},ve={class:"trend-indicator"},Re={class:"custom-header"},Se={class:"rps-cell"},xe={class:"custom-header"},be={class:"change-percent-cell"},ke={class:"trend-indicator"},Pe={class:"custom-header"},ye={class:"rps-cell"},Ce={class:"table-footer"},ze=Z({__name:"IndexRpsView",setup(De){const v=g(!1),R=g([]),U=g(""),S=g(""),m=g(1),x=g(2e3),k=E(()=>{let n=R.value;return S.value&&(n=n.filter(a=>a.name.includes(S.value))),n}),$=E(()=>{const n=(m.value-1)*x.value,a=n+x.value;return k.value.slice(n,a)}),q=()=>"RPS_5",P=n=>n>=90?"#f56c6c":n>=80?"#e6a23c":n>=70?"#67c23a":"#909399",y=n=>n>=90?"极强":n>=80?"强势":n>=70?"良好":n>=50?"一般":"弱势",C=n=>n>=90?"rank-excellent":n>=80?"rank-strong":n>=70?"rank-good":n>=50?"rank-normal":"rank-weak",A=({row:n})=>{const a=n.RPS_5;return a>=90?"row-excellent":a>=80?"row-strong":a>=70?"row-good":""},G=n=>{n.prop&&n.order&&R.value.sort((a,z)=>{const u=Number(a[n.prop]??0),b=Number(z[n.prop]??0);return n.order==="ascending"?u-b:b-u})},K=n=>{x.value=n,m.value=1},L=n=>{m.value=n},j=n=>{I({message:`${n.name} (${n.ts_code})`,type:"info"})},H=async()=>{if(!v.value){v.value=!0;try{const a=await le("5,20,60");R.value=a.data,U.value=a.query_time,I.success("RPS数据加载成功")}catch(n){console.error("加载RPS数据失败:",n),I.error("加载RPS数据失败，请稍后重试")}finally{v.value=!1}}};return ee(()=>{H()}),te(S,()=>{m.value=1}),(n,a)=>{const z=c("el-input"),u=c("el-table-column"),b=c("el-tag"),s=c("el-icon"),p=c("el-tooltip"),J=c("el-button"),D=c("el-progress"),O=c("el-table"),Q=c("el-pagination"),W=c("el-card"),X=c("el-empty"),Y=ne("loading");return re((d(),M("div",se,[R.value.length>0?(d(),M("div",de,[e(W,{shadow:"hover"},{header:r(()=>[o("div",ue,[o("div",ie,[e(z,{modelValue:S.value,"onUpdate:modelValue":a[0]||(a[0]=t=>S.value=t),placeholder:"搜索指数名称","prefix-icon":l(ae),clearable:"",style:{width:"200px"}},null,8,["modelValue","prefix-icon"])])])]),default:r(()=>[e(O,{data:$.value,stripe:"",border:"",style:{width:"100%"},"default-sort":{prop:q(),order:"descending"},height:"600","row-class-name":A,"highlight-current-row":"",onSortChange:G},{default:r(()=>[e(u,{type:"index",label:"#",width:"50",fixed:"left",align:"center"}),e(u,{prop:"ts_code",label:"ts_code",width:"150",sortable:"custom",fixed:"left",align:"center"},{default:r(t=>[e(b,{size:"small",effect:"plain"},{default:r(()=>[T(_(t.row.ts_code),1)]),_:2},1024)]),_:1}),e(u,{prop:"name",label:"name",width:"150",sortable:"custom",fixed:"left"},{header:r(()=>[o("div",ce,[a[3]||(a[3]=o("span",null,"指数简称",-1)),e(p,{content:"点击指数名称可查看详情",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(f))]),_:1})]),_:1})])]),default:r(t=>[e(J,{type:"text",onClick:w=>j(t.row)},{default:r(()=>[T(_(t.row.name),1)]),_:2},1032,["onClick"])]),_:1}),e(u,{label:"5日涨跌幅",width:"120",sortable:"custom",prop:"return_5",align:"center"},{header:r(()=>[o("div",_e,[a[4]||(a[4]=o("span",null,"5日涨跌幅",-1)),e(p,{content:"5日内的价格变化百分比",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(f))]),_:1})]),_:1})])]),default:r(t=>[o("div",pe,[o("span",{class:h({up:t.row.return_5>0,down:t.row.return_5<0})},_(t.row.return_5>0?"+":"")+_(t.row.return_5.toFixed(2))+"% ",3),o("div",fe,[t.row.return_5>0?(d(),i(s,{key:0},{default:r(()=>[e(l(N))]),_:1})):t.row.return_5<0?(d(),i(s,{key:1},{default:r(()=>[e(l(B))]),_:1})):(d(),i(s,{key:2},{default:r(()=>[e(l(F))]),_:1}))])])]),_:1}),e(u,{label:"RPS_5",width:"170",sortable:"custom",prop:"RPS_5",align:"center"},{header:r(()=>[o("div",me,[a[5]||(a[5]=o("span",null,"RPS_5",-1)),e(p,{content:"相对强度指标，值越高表示相对强度越强",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(f))]),_:1})]),_:1})])]),default:r(t=>[o("div",we,[e(D,{percentage:t.row.RPS_5,color:P(t.row.RPS_5),format:w=>w.toFixed(1),"stroke-width":18,"text-inside":!0,"show-text":!0},null,8,["percentage","color","format"]),o("div",{class:h(["rps-rank",C(t.row.RPS_5)])},_(y(t.row.RPS_5)),3)])]),_:1}),e(u,{label:"20日涨跌幅",width:"120",sortable:"custom",prop:"return_20",align:"center"},{header:r(()=>[o("div",ge,[a[6]||(a[6]=o("span",null,"20日涨跌幅",-1)),e(p,{content:"20日内的价格变化百分比",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(f))]),_:1})]),_:1})])]),default:r(t=>[o("div",he,[o("span",{class:h({up:t.row.return_20>0,down:t.row.return_20<0})},_(t.row.return_20>0?"+":"")+_(t.row.return_20.toFixed(2))+"% ",3),o("div",ve,[t.row.return_20>0?(d(),i(s,{key:0},{default:r(()=>[e(l(N))]),_:1})):t.row.return_20<0?(d(),i(s,{key:1},{default:r(()=>[e(l(B))]),_:1})):(d(),i(s,{key:2},{default:r(()=>[e(l(F))]),_:1}))])])]),_:1}),e(u,{label:"RPS_20",width:"170",sortable:"custom",prop:"RPS_20",align:"center"},{header:r(()=>[o("div",Re,[a[7]||(a[7]=o("span",null,"RPS_20",-1)),e(p,{content:"相对强度指标，值越高表示相对强度越强",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(f))]),_:1})]),_:1})])]),default:r(t=>[o("div",Se,[e(D,{percentage:t.row.RPS_20,color:P(t.row.RPS_20),format:w=>w.toFixed(1),"stroke-width":18,"text-inside":!0,"show-text":!0},null,8,["percentage","color","format"]),o("div",{class:h(["rps-rank",C(t.row.RPS_20)])},_(y(t.row.RPS_20)),3)])]),_:1}),e(u,{label:"60日涨跌幅",width:"120",sortable:"custom",prop:"return_60",align:"center"},{header:r(()=>[o("div",xe,[a[8]||(a[8]=o("span",null,"60日涨跌幅",-1)),e(p,{content:"60日内的价格变化百分比",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(f))]),_:1})]),_:1})])]),default:r(t=>[o("div",be,[o("span",{class:h({up:t.row.return_60>0,down:t.row.return_60<0})},_(t.row.return_60>0?"+":"")+_(t.row.return_60.toFixed(2))+"% ",3),o("div",ke,[t.row.return_60>0?(d(),i(s,{key:0},{default:r(()=>[e(l(N))]),_:1})):t.row.return_60<0?(d(),i(s,{key:1},{default:r(()=>[e(l(B))]),_:1})):(d(),i(s,{key:2},{default:r(()=>[e(l(F))]),_:1}))])])]),_:1}),e(u,{label:"RPS_60",width:"170",sortable:"custom",prop:"RPS_60",align:"center"},{header:r(()=>[o("div",Pe,[a[9]||(a[9]=o("span",null,"RPS_60",-1)),e(p,{content:"相对强度指标，值越高表示相对强度越强",placement:"top"},{default:r(()=>[e(s,null,{default:r(()=>[e(l(f))]),_:1})]),_:1})])]),default:r(t=>[o("div",ye,[e(D,{percentage:t.row.RPS_60,color:P(t.row.RPS_60),format:w=>w.toFixed(1),"stroke-width":18,"text-inside":!0,"show-text":!0},null,8,["percentage","color","format"]),o("div",{class:h(["rps-rank",C(t.row.RPS_60)])},_(y(t.row.RPS_60)),3)])]),_:1})]),_:1},8,["data","default-sort"]),o("div",Ce,[k.value.length>10?(d(),i(Q,{key:0,layout:"total, sizes, prev, pager, next",total:k.value.length,"page-sizes":[10,20,50,100],"page-size":x.value,"onUpdate:pageSize":a[1]||(a[1]=t=>x.value=t),"current-page":m.value,"onUpdate:currentPage":a[2]||(a[2]=t=>m.value=t),onSizeChange:K,onCurrentChange:L},null,8,["total","page-size","current-page"])):V("",!0)])]),_:1})])):V("",!0),!v.value&&R.value.length===0?(d(),i(X,{key:1,description:"暂无RPS数据"})):V("",!0)])),[[Y,v.value]])}}}),Ne=oe(ze,[["__scopeId","data-v-ba6470e3"]]);export{Ne as default};
