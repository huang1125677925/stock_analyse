import{x as Z,d as G,z as h,a as x,y as J,c as u,e as a,f as p,g as B,w as l,i as s,E as I,b as m,k as f,F as g,A as D,t as N,o as r,_ as K}from"./index-DuOz8Dc6.js";async function X(S,c={}){return await Z.get("/django/api/strategy/individual-analysis/actual-rise-ratio/",{params:{start_date:c.startDate,end_date:c.endDate,prediction_type:c.predictionType}})}const $={class:"ml-index-validation"},ee={class:"card-header"},te={class:"actions"},ae={class:"card-header"},le={key:0,class:"summary"},oe={key:1,class:"table-wrapper"},ne={key:2,class:"kv-wrapper"},se={key:0},re=G({__name:"MlIndexPredictionValidation",setup(S){const c=h(()=>window.innerWidth<768),n=x({stockCode:"",startDate:"",endDate:"",predictionType:""}),y=x(!1),d=x(null),U=h(()=>!d.value||!Array.isArray(d.value.data)||d.value.data.length===0?[]:Object.keys(d.value.data[0]??{})),E={market:"市场",code:"代码",name:"名称",trade_date:"交易日期",predict_rise_prob:"预测上涨概率",confidence:"置信度",actual_rise_ratio_5d:"5日实际上涨比例(未满5天则按实际天数计算)",prediction_type:"预测类型",created_at:"创建时间"},w=h(()=>{const t=[];if(!d.value)return t;const e=d.value.data;return e&&typeof e=="object"&&(e.stock_code&&t.push({label:"代码",value:e.stock_code}),e.start_date&&t.push({label:"开始日期",value:e.start_date}),e.end_date&&t.push({label:"结束日期",value:e.end_date}),e.prediction_type&&t.push({label:"预测类型",value:e.prediction_type}),typeof e.count=="number"&&t.push({label:"记录数",value:e.count}),typeof e.total=="number"&&t.push({label:"总条数",value:e.total})),t});function P(t){return["string","number","boolean"].includes(typeof t)||t===null||t===void 0}function R(t){return Array.isArray(t)?t.map(e=>typeof e=="object"&&e?e:{value:e}):typeof t=="object"&&t?Object.entries(t).map(([e,i])=>({key:e,value:i})):[{value:t}]}function F(t){if(Array.isArray(t)){const e=t.find(i=>typeof i=="object"&&i);return e?Object.keys(e):["value"]}return typeof t=="object"&&t?["key","value"]:["value"]}async function C(){n.value.stockCode||(n.value.stockCode=""),y.value=!0;try{const t=await X(n.value.stockCode,{startDate:n.value.startDate||void 0,endDate:n.value.endDate||void 0,predictionType:n.value.predictionType||void 0});d.value=t,I.success("查询成功")}catch{I.error("查询失败，请稍后重试")}finally{y.value=!1}}function L(){n.value={stockCode:"",startDate:"",endDate:"",predictionType:""},d.value=null}return J(()=>{C()}),(t,e)=>{const i=s("el-tag"),q=s("el-input"),v=s("el-form-item"),_=s("el-col"),Y=s("el-date-picker"),b=s("el-option"),H=s("el-select"),M=s("el-button"),Q=s("el-row"),W=s("el-form"),j=s("el-card"),A=s("el-descriptions-item"),T=s("el-descriptions"),z=s("el-table-column"),O=s("el-table");return r(),u("div",$,[a(j,{class:"query-card",shadow:"hover"},{header:l(()=>[m("div",ee,[e[5]||(e[5]=m("span",null,"指数预测验证查询",-1)),a(i,{type:"success",size:"small"},{default:l(()=>[...e[4]||(e[4]=[f("5日实际上涨比例",-1)])]),_:1})])]),default:l(()=>[a(W,{model:n.value,"label-position":"right","label-width":"120px",inline:!1},{default:l(()=>[a(Q,{gutter:12},{default:l(()=>[a(_,{xs:24,sm:12,md:8},{default:l(()=>[a(v,{label:"代码（TS）"},{default:l(()=>[a(q,{modelValue:n.value.stockCode,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value.stockCode=o),placeholder:"例如：000001.SH 或 399001.SZ"},null,8,["modelValue"])]),_:1})]),_:1}),a(_,{xs:24,sm:12,md:8},{default:l(()=>[a(v,{label:"开始日期"},{default:l(()=>[a(Y,{modelValue:n.value.startDate,"onUpdate:modelValue":e[1]||(e[1]=o=>n.value.startDate=o),type:"date",placeholder:"选择开始日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1}),a(_,{xs:24,sm:12,md:8},{default:l(()=>[a(v,{label:"结束日期"},{default:l(()=>[a(Y,{modelValue:n.value.endDate,"onUpdate:modelValue":e[2]||(e[2]=o=>n.value.endDate=o),type:"date",placeholder:"选择结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1}),a(_,{xs:24,sm:12,md:8},{default:l(()=>[a(v,{label:"预测类型"},{default:l(()=>[a(H,{modelValue:n.value.predictionType,"onUpdate:modelValue":e[3]||(e[3]=o=>n.value.predictionType=o),placeholder:"可选：后端支持类型"},{default:l(()=>[a(b,{label:"macd_xgb",value:"macd_xgb"}),a(b,{label:"svm",value:"svm"}),a(b,{label:"lr",value:"lr"}),a(b,{label:"auto",value:"auto"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(_,{xs:24,sm:24,md:8},{default:l(()=>[m("div",te,[a(M,{type:"primary",loading:y.value,onClick:C},{default:l(()=>[...e[6]||(e[6]=[f("查询",-1)])]),_:1},8,["loading"]),a(M,{onClick:L},{default:l(()=>[...e[7]||(e[7]=[f("重置",-1)])]),_:1})])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),d.value?(r(),p(j,{key:0,class:"result-card",shadow:"never"},{header:l(()=>[m("div",ae,[e[9]||(e[9]=m("span",null,"查询结果",-1)),a(i,{type:"info",size:"small"},{default:l(()=>[...e[8]||(e[8]=[f("动态渲染",-1)])]),_:1})])]),default:l(()=>[w.value.length?(r(),u("div",le,[a(T,{column:c.value?1:3,border:""},{default:l(()=>[(r(!0),u(g,null,D(w.value,(o,k)=>(r(),p(A,{key:k,label:o.label},{default:l(()=>[f(N(o.value),1)]),_:2},1032,["label"]))),128))]),_:1},8,["column"])])):B("",!0),Array.isArray(d.value.data)?(r(),u("div",oe,[a(O,{data:d.value.data,stripe:"",size:"small"},{default:l(()=>[(r(!0),u(g,null,D(U.value,o=>(r(),p(z,{key:o,prop:o,label:E[o]||o,"min-width":120,align:"center",sortable:""},null,8,["prop","label"]))),128))]),_:1},8,["data"])])):(r(),u("div",ne,[a(T,{column:c.value?1:2,border:""},{default:l(()=>[(r(!0),u(g,null,D(d.value.data,(o,k)=>(r(),p(A,{key:k,label:k,align:"center"},{default:l(()=>[P(o)?(r(),u("span",se,N(o),1)):(r(),p(O,{key:1,data:R(o),size:"small",style:{width:"100%"}},{default:l(()=>[(r(!0),u(g,null,D(F(o),V=>(r(),p(z,{key:V,prop:V,label:V,"min-width":120,align:"center"},null,8,["prop","label"]))),128))]),_:2},1032,["data"]))]),_:2},1032,["label"]))),128))]),_:1},8,["column"])]))]),_:1})):B("",!0)])}}}),ue=K(re,[["__scopeId","data-v-9109bff5"]]);export{ue as default};
