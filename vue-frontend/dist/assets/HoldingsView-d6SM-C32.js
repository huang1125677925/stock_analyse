import{d as V,a as m,A as B,c as $,e,w as t,i as l,$ as f,E as r,u as L,b as c,C as N,D as A,f as M,k as d,t as h,l as w,a1 as P,O as z,o as v,_ as I}from"./index-Dg80bSOo.js";import{g as O,d as R}from"./personalHoldingsApi-C4XdpaYi.js";const S={class:"holdings-view"},T={class:"header-content"},j={class:"header-actions"},q={class:"table-container"},F=V({__name:"HoldingsView",setup(G){const _=L(),i=m(!1),g=m([]),p=async()=>{if(!f()){r.error("请先登录后再访问个人中心"),_.push("/login");return}i.value=!0;try{const n=await O();g.value=n.data.list,r.success(n.message||"列表加载成功")}catch(n){r.error(n?.message||"列表加载失败")}finally{i.value=!1}},y=async n=>{if(!f()){r.error("请先登录后再进行操作"),_.push("/login");return}try{const a=await R(n);r.success(a.message||"删除成功"),p()}catch(a){r.error(a?.message||"删除失败")}};B(()=>{p()});const b=n=>{_.push(`/stock-history/${n}`)};return(n,a)=>{const u=l("el-button"),s=l("el-table-column"),k=l("el-tag"),C=l("el-popconfirm"),D=l("el-table"),H=l("el-card"),x=A("loading");return v(),$("div",S,[e(H,{class:"page-header"},{header:t(()=>[c("div",T,[a[1]||(a[1]=c("h2",null,"个人中心 - 持有/关注股票",-1)),c("div",j,[e(u,{type:"primary",icon:w(z),onClick:p,loading:i.value},{default:t(()=>[...a[0]||(a[0]=[d("刷新列表",-1)])]),_:1},8,["icon","loading"])])])]),default:t(()=>[c("div",q,[N((v(),M(D,{data:g.value,border:"",stripe:"",style:{width:"100%"}},{default:t(()=>[e(s,{prop:"stock_code",label:"股票代码","min-width":"120",align:"center","header-align":"center"}),e(s,{prop:"stock_name",label:"股票名称","min-width":"160",align:"center","header-align":"center"},{default:t(o=>[e(u,{type:"primary",link:"",onClick:E=>b(o.row.stock_code)},{default:t(()=>[d(h(o.row.stock_name),1)]),_:2},1032,["onClick"])]),_:1}),e(s,{prop:"industry",label:"行业","min-width":"140",align:"center","header-align":"center"}),e(s,{prop:"relation_type",label:"类型","min-width":"120",align:"center","header-align":"center"},{default:t(o=>[e(k,{type:o.row.relation_type==="HELD"?"warning":"success"},{default:t(()=>[d(h(o.row.relation_type==="HELD"?"持有":"关注"),1)]),_:2},1032,["type"])]),_:1}),e(s,{prop:"created_at",label:"创建时间","min-width":"180",align:"center","header-align":"center"}),e(s,{label:"操作","min-width":"160",align:"center","header-align":"center"},{default:t(o=>[e(C,{title:"确认删除该记录？",onConfirm:E=>y(o.row.id)},{reference:t(()=>[e(u,{type:"danger",size:"small",icon:w(P)},{default:t(()=>[...a[2]||(a[2]=[d("删除",-1)])]),_:1},8,["icon"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[x,i.value]])])]),_:1})])}}}),Q=I(F,[["__scopeId","data-v-78551354"]]);export{Q as default};
