import{d as x,a as m,A as H,c as E,e,w as a,i as s,$ as f,E as l,u as V,b as c,C as B,D as L,f as N,k as _,t as A,l as h,a1 as M,O as P,o as w,_ as $}from"./index-B1jiIi42.js";import{g as z,d as I}from"./personalHoldingsApi-a1iaYHMO.js";const O={class:"holdings-view"},R={class:"header-content"},S={class:"header-actions"},T={class:"table-container"},j=x({__name:"HoldingsView",setup(q){const p=V(),r=m(!1),u=m([]),d=async()=>{if(!f()){l.error("请先登录后再访问个人中心"),p.push("/login");return}r.value=!0;try{const n=await z();u.value=n.data.list,l.success(n.message||"列表加载成功")}catch(n){l.error(n?.message||"列表加载失败")}finally{r.value=!1}},v=async n=>{if(!f()){l.error("请先登录后再进行操作"),p.push("/login");return}try{const t=await I(n);l.success(t.message||"删除成功"),d()}catch(t){l.error(t?.message||"删除失败")}};return H(()=>{d()}),(n,t)=>{const g=s("el-button"),o=s("el-table-column"),y=s("el-tag"),b=s("el-popconfirm"),k=s("el-table"),C=s("el-card"),D=L("loading");return w(),E("div",O,[e(C,{class:"page-header"},{header:a(()=>[c("div",R,[t[1]||(t[1]=c("h2",null,"个人中心 - 持有/关注股票",-1)),c("div",S,[e(g,{type:"primary",icon:h(P),onClick:d,loading:r.value},{default:a(()=>[...t[0]||(t[0]=[_("刷新列表",-1)])]),_:1},8,["icon","loading"])])])]),default:a(()=>[c("div",T,[B((w(),N(k,{data:u.value,border:"",stripe:"",style:{width:"100%"}},{default:a(()=>[e(o,{prop:"stock_code",label:"股票代码","min-width":"120",align:"center","header-align":"center"}),e(o,{prop:"stock_name",label:"股票名称","min-width":"140",align:"center","header-align":"center"}),e(o,{prop:"industry",label:"行业","min-width":"140",align:"center","header-align":"center"}),e(o,{prop:"relation_type",label:"类型","min-width":"120",align:"center","header-align":"center"},{default:a(i=>[e(y,{type:i.row.relation_type==="HELD"?"warning":"success"},{default:a(()=>[_(A(i.row.relation_type==="HELD"?"持有":"关注"),1)]),_:2},1032,["type"])]),_:1}),e(o,{prop:"created_at",label:"创建时间","min-width":"180",align:"center","header-align":"center"}),e(o,{label:"操作","min-width":"160",fixed:"right",align:"center","header-align":"center"},{default:a(i=>[e(b,{title:"确认删除该记录？",onConfirm:F=>v(i.row.id)},{reference:a(()=>[e(g,{type:"danger",size:"small",icon:h(M)},{default:a(()=>[...t[2]||(t[2]=[_("删除",-1)])]),_:1},8,["icon"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[D,r.value]])])]),_:1})])}}}),K=$(j,[["__scopeId","data-v-08c98670"]]);export{K as default};
