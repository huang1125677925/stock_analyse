import{x as c}from"./index-yvE1imiI.js";async function _(n){return(await c.get("/django/api/index/sw-valuation-analysis/",{params:n})).data.records}const l="/django/api/stock";async function f(n,t){return(await c.get(`${l}/industry-sector/daily/${n}/`,{params:t})).data}function p(n){if(!n||n.length===0)return{avgChangePercent:0,avgPeRatio:0,avgPbRatio:0,avgChange60Day:0,avgChangeYtd:0};let t=0,a=0,s=0,i=0,e=0,g=0,o=0,u=0,d=0,h=0;return n.forEach(r=>{typeof r.change_percent=="number"&&(t+=r.change_percent,g++),typeof r.pe_ratio=="number"&&r.pe_ratio>0&&(a+=r.pe_ratio,o++),typeof r.pb_ratio=="number"&&r.pb_ratio>0&&(s+=r.pb_ratio,u++),typeof r.change_60day=="number"&&(i+=r.change_60day,d++),typeof r.change_ytd=="number"&&(e+=r.change_ytd,h++)}),{avgChangePercent:g>0?t/g:0,avgPeRatio:o>0?a/o:0,avgPbRatio:u>0?s/u:0,avgChange60Day:d>0?i/d:0,avgChangeYtd:h>0?e/h:0}}async function v(n){try{const t=await c.get(`${l}/industry-sectors/`);if(t.code!==200)throw new Error(t.message||"获取行业板块列表失败");const a=t.data.sectors.find(o=>o.name===n);if(!a)return console.warn(`未找到行业: ${n}`),null;const s=await c.get(`${l}/industry-sector/constituents/${a.code}/`);if(s.code!==200)throw new Error(s.message||"获取行业成分股失败");const i=s.data.constituents;let e=null;try{const o=await c.get(`${l}/industry-sector/realtime/${a.code}/`);o.code===200&&(e=o.data)}catch(o){console.warn(`获取行业 ${a.code} 实时行情失败:`,o)}const g=p(i);return{industry:a.name,code:a.code,count:a.stock_count,stocks:i,...g,latest_price:e?.latest_price||a.latest_price,change_amount:e?.change,change_percent:e?.change_percent||a.change_percent,open:e?.open,high:e?.high,low:e?.low,volume:e?.volume,amount:e?.amount,turnover_rate:e?.turnover_rate,rising_stocks:e?.rising_stocks,falling_stocks:e?.falling_stocks,unchanged_stocks:e?.unchanged_stocks}}catch(t){throw console.error("获取行业详情错误:",t),t}}async function m(n){try{const t=n?{industry:n}:{};return(await c.get(`${l}/industry/statistics/`,{params:t})).data}catch(t){throw console.error("Error fetching industry statistics:",t),t}}export{m as a,_ as b,v as f,f as g};
