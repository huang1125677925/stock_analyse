import{d as B,r as M,a as m,c as N,b as l,e as o,f as U,g as q,w as s,h as E,i as r,u as F,j as R,o as w,k as i,l as $,m as P,n as h,E as j,p as I,_ as S}from"./index-Dg80bSOo.js";const T={class:"login-container"},z={class:"login-card"},A={class:"login-options"},D={class:"login-footer"},G=B({__name:"LoginView",setup(H){const p=F(),b=R(),t=M({username:"",password:""}),V={username:[{required:!0,message:"请输入用户名或邮箱",trigger:"blur"},{min:3,message:"用户名长度不能少于3个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,message:"密码长度不能少于8个字符",trigger:"blur"}]},c=m(!1),a=m(""),g=m();async function _(){try{a.value="",await g.value.validate(),await h(t.username,t.password),j.success("登录成功");const u=b.query.redirect||"/";p.push(u)}catch(u){console.error("登录过程中发生错误:",u),a.value=I.value||u.message||"登录失败，请检查您的凭据"}}function k(){p.push("/reset-password")}return(u,e)=>{const f=r("el-input"),d=r("el-form-item"),x=r("el-checkbox"),v=r("el-button"),y=r("router-link"),C=r("el-form"),L=r("el-alert");return w(),N("div",T,[l("div",z,[e[9]||(e[9]=l("div",{class:"login-header"},[l("h2",null,"登录"),l("p",null,"欢迎回来，请登录您的账号")],-1)),o(C,{ref_key:"loginForm$",ref:g,model:t,rules:V,"label-position":"top",onSubmit:E(_,["prevent"])},{default:s(()=>[o(d,{label:"用户名/邮箱",prop:"username"},{default:s(()=>[o(f,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=n=>t.username=n),placeholder:"请输入用户名或邮箱","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),o(d,{label:"密码",prop:"password"},{default:s(()=>[o(f,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=n=>t.password=n),placeholder:"请输入密码",type:"password","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),l("div",A,[o(x,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=n=>c.value=n)},{default:s(()=>[...e[4]||(e[4]=[i("记住我",-1)])]),_:1},8,["modelValue"]),o(v,{type:"text",onClick:k},{default:s(()=>[...e[5]||(e[5]=[i("忘记密码？",-1)])]),_:1})]),o(d,null,{default:s(()=>[o(v,{type:"primary",onClick:_,loading:$(P),class:"login-button"},{default:s(()=>[...e[6]||(e[6]=[i(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1}),l("div",D,[l("p",null,[e[8]||(e[8]=i("还没有账号？",-1)),o(y,{to:"/register"},{default:s(()=>[...e[7]||(e[7]=[i("立即注册",-1)])]),_:1})])])]),_:1},8,["model"]),a.value?(w(),U(L,{key:0,title:a.value,type:"error","show-icon":"",closable:!0,onClose:e[3]||(e[3]=n=>a.value="")},null,8,["title"])):q("",!0)])])}}}),K=S(G,[["__scopeId","data-v-4ccf2e03"]]);export{K as default};
