import{x as I,d as E,a as k,y as D,z as N,c as i,e as r,w as l,i as _,E as T,b as e,F as x,A as C,u as F,o as u,t as h,_ as L}from"./index-D8Wty6Yi.js";async function v(p,o=50){return(await I.get("/django/api/tasks/git-info/",{params:{repo_path:p,limit:o}})).data}const M={class:"home"},R={class:"welcome-content"},B={class:"feature-updates-list"},V={class:"update-header"},b={class:"update-meta"},O={class:"update-date"},P={class:"update-content"},U={class:"update-description"},j=E({__name:"HomeView",setup(p){F();const o=k([]),m=async()=>{try{const s="/root/stock_analyse",t="/root/django/stock_data_service",[n,c]=await Promise.all([v(s,1e3),v(t,1e3)]),a=(d,y)=>d.map(f=>({date:new Date(f.authored_datetime).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),content:`${y}${f.message}`}));o.value=[...a(n.records,"【前端】："),...a(c.records,"【后端】：")]}catch(s){console.error("加载功能迭代失败:",s),T.error("加载功能迭代失败，请稍后重试")}};D(()=>{m()});const w=N(()=>[...o.value].sort((s,t)=>new Date(t.date).getTime()-new Date(s.date).getTime()));return(s,t)=>{const g=_("el-card"),n=_("el-col"),c=_("el-row");return u(),i("div",M,[r(c,{gutter:20},{default:l(()=>[r(n,{span:24},{default:l(()=>[r(g,{class:"welcome-card"},{default:l(()=>[e("div",R,[t[0]||(t[0]=e("h2",null,"平台功能迭代",-1)),t[1]||(t[1]=e("p",null,"查看平台最新的功能更新和版本发布历史，了解系统的持续改进和优化。",-1)),e("div",B,[(u(!0),i(x,null,C(w.value,(a,d)=>(u(),i("div",{key:d,class:"update-item"},[e("div",V,[e("div",b,[e("span",O,h(a.date),1)])]),e("div",P,[e("p",U,h(a.content),1)])]))),128))])])]),_:1})]),_:1}),r(n,{span:8})]),_:1})])}}}),A=L(j,[["__scopeId","data-v-b89505f3"]]);export{A as default};
