import{i as m}from"./index-ElshY9iF.js";import{d as z,a as _,x,z as h,A as g,B as y,c as C,K as v,G as l,o as k,_ as R}from"./index-DjG3W8mg.js";const w=z({__name:"HeatmapChart",props:{option:{},height:{},autoResize:{type:Boolean,default:!0}},emits:["chartReady","chartClick"],setup(p,{expose:u,emit:d}){const a=p,n=d,r=_();let e=null;const o=x(()=>{if(a.height)return a.height;const t=a.option?.yAxis;if(t&&Array.isArray(t)&&t[0]?.data){const i=t[0].data.length;return Math.max(500,i*22+120)}else if(t&&t.data){const i=t.data.length;return Math.max(500,i*22+120)}return 500}),f=()=>{r.value&&(e=m(r.value),e.on("click",t=>{n("chartClick",t)}),n("chartReady",e),s())},s=()=>{!e||!a.option||l(()=>{e&&(e.clear(),e.setOption(a.option),setTimeout(()=>{e&&e.resize()},0))})};h(()=>a.option,s,{deep:!0}),h(o,()=>{l(()=>{e&&e.resize()})});const c=()=>{e&&a.autoResize&&e.resize()};return g(()=>{f(),a.autoResize&&window.addEventListener("resize",c)}),y(()=>{e&&(e.dispose(),e=null),a.autoResize&&window.removeEventListener("resize",c)}),u({getChart:()=>e,resize:()=>{e&&e.resize()},clear:()=>{e&&e.clear()}}),(t,i)=>(k(),C("div",{ref_key:"chartContainer",ref:r,class:"heatmap-chart",style:v({height:o.value+"px"})},null,4))}}),H=R(w,[["__scopeId","data-v-b4aa47f4"]]);export{H};
